"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(){var e=cityssm.dateToString(new Date),t=document.getElementById("filter--eventDate"),a=document.getElementById("filter--showLicences"),i=document.getElementById("container--events"),s=exports.config_days;delete exports.config_days;var n=exports.config_licenceTypes;function d(){cityssm.clearElement(i),""===t.value&&(t.value=cityssm.dateToString(new Date)),cityssm.postJSON("/events/doGetEventsByWeek",{eventDate:t.value},function(t){if(0!==t.licences.length||0!==t.events.length){var d=document.createElement("table");d.className="table is-fixed is-fullwidth is-bordered";for(var c="<thead><tr>",r=cityssm.dateStringToDate(t.startDateString),o=0;o<=6;o+=1){var l=cityssm.dateToString(r);c+='<th class="has-text-centered'+(l===e?" has-background-primary has-text-white":" has-background-white-ter")+'">'+s[o]+"<br />"+l+"</th>",r.setDate(r.getDate()+1)}c+="</tr></thead>",d.innerHTML=c;var m=document.createElement("tbody");m.id="tbody--licences",a.checked||(m.className="is-hidden");for(var v=0;v<t.licences.length;v+=1){var h=t.licences[v],g=0,u="";if(h.startDateString>t.startDateString){g=cityssm.dateStringDifferenceInDays(t.startDateString,h.startDateString);for(var f=0;f<g;f+=1)u+="<td></td>"}var b=1;h.startDateString!==h.endDateString&&(b=Math.min(7-g,cityssm.dateStringDifferenceInDays(0===g?t.startDateString:h.startDateString,h.endDateString)+1));var p="";for(f=g+b;f<7;f+=1)p+="<td></td>";var y=n[h.licenceTypeKey];m.insertAdjacentHTML("beforeend","<tr>"+u+'<td colspan="'+b+'"><a class="button has-text-left is-small is-block has-height-auto is-wrap is-primary is-light" data-tooltip="View Licence" href="/licences/'+h.licenceID+'"><div class="columns has-margin-bottom-0 is-variable is-1"><div class="column has-padding-bottom-5 is-narrow"><i class="fas fa-fw fa-certificate" aria-hidden="true"></i></div><div class="column has-padding-bottom-5 has-text-weight-semibold">'+h.externalLicenceNumber+"<br />"+(y||h.licenceTypeKey)+'</div></div><div class="columns has-margin-bottom-0 is-variable is-1"><div class="column has-padding-bottom-5 is-narrow"><i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i></div><div class="column has-padding-bottom-5">'+(""===h.locationName?h.locationAddress1:h.locationName)+'</div></div><div class="columns has-margin-bottom-0 is-variable is-1"><div class="column has-padding-bottom-5 is-narrow"><i class="fas fa-fw fa-users" aria-hidden="true"></i></div><div class="column has-padding-bottom-5">'+h.organizationName+'</div></div><div class="columns is-variable is-1"><div class="column is-narrow"><i class="fas fa-fw fa-calendar" aria-hidden="true"></i></div><div class="column">'+h.startDateString+(h.startDateString===h.endDateString?"":" to "+h.endDateString)+"</div></div></a></td>"+p+"</tr>")}d.appendChild(m);for(var D=[document.createElement("td"),document.createElement("td"),document.createElement("td"),document.createElement("td"),document.createElement("td"),document.createElement("td"),document.createElement("td")],w=0;w<t.events.length;w+=1){var S=t.events[w];y=n[S.licenceTypeKey];D[T=cityssm.dateStringToDate(S.eventDateString).getDay()].insertAdjacentHTML("beforeend",'<a class="button has-margin-bottom-5 has-text-left is-small is-block has-height-auto is-wrap is-link is-light" data-tooltip="View Event" href="/events/'+S.licenceID+"/"+S.eventDate+'"><div class="columns has-margin-bottom-0 is-variable is-1"><div class="column has-padding-bottom-5 is-narrow"><i class="fas fa-fw fa-clock" aria-hidden="true"></i></div><div class="column has-padding-bottom-5">'+S.startTimeString+'</div></div><div class="columns has-margin-bottom-0 is-variable is-1"><div class="column has-padding-bottom-5 is-narrow"><i class="fas fa-fw fa-certificate" aria-hidden="true"></i></div><div class="column has-padding-bottom-5 has-text-weight-semibold">'+S.externalLicenceNumber+"<br />"+(y||S.licenceTypeKey)+'</div></div><div class="columns has-margin-bottom-0 is-variable is-1"><div class="column has-padding-bottom-5 is-narrow"><i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i></div><div class="column has-padding-bottom-5">'+(""===S.locationName?S.locationAddress1:S.locationName)+'</div></div><div class="columns has-margin-bottom-0 is-variable is-1"><div class="column has-padding-bottom-5 is-narrow"><i class="fas fa-fw fa-users" aria-hidden="true"></i></div><div class="column has-padding-bottom-5">'+S.organizationName+"</div></div></a>")}for(var E=document.createElement("tr"),T=0;T<D.length;T+=1)E.appendChild(D[T]);var x=document.createElement("tbody");x.appendChild(E),d.appendChild(x),i.appendChild(d)}else i.innerHTML='<div class="message is-info"><p class="message-body">There are no licences or events with activity between '+t.startDateString+" and "+t.endDateString+".</p></div>"})}delete exports.config_licenceTypes,t.addEventListener("change",d),d(),a.addEventListener("change",function(){a.checked?document.getElementById("tbody--licences").classList.remove("is-hidden"):document.getElementById("tbody--licences").classList.add("is-hidden")})}();