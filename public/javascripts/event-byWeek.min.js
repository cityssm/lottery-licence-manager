"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(){var e=cityssm.dateToString(new Date),t=document.getElementById("filter--eventDate"),a=document.getElementById("filter--showLicences"),i=document.getElementById("container--events"),s=exports.config_days;delete exports.config_days;var n=exports.config_licenceTypes;function c(){cityssm.clearElement(i),""===t.value&&(t.value=cityssm.dateToString(new Date)),cityssm.postJSON("/events/doGetEventsByWeek",{eventDate:t.value},function(t){if(0!==t.licences.length||0!==t.events.length){var c=document.createElement("table");c.className="table is-fixed is-fullwidth is-bordered";for(var r="<thead><tr>",d=cityssm.dateStringToDate(t.startDateString),l=0;l<=6;l+=1){var o=cityssm.dateToString(d);r+='<th class="has-text-centered'+(o===e?" has-background-primary has-text-white":" has-background-white-ter")+'">'+s[l]+"<br />"+o+"</th>",d.setDate(d.getDate()+1)}r+="</tr></thead>",c.innerHTML=r;var m=document.createElement("tbody");m.id="tbody--licences",a.checked||(m.className="is-hidden");for(var v=0;v<t.licences.length;v+=1){var u=t.licences[v],f=0,b="";if(u.startDateString>t.startDateString){f=cityssm.dateStringDifferenceInDays(t.startDateString,u.startDateString);for(var h=0;h<f;h+=1)b+="<td></td>"}var g=1;u.startDateString!==u.endDateString&&(g=Math.min(7-f,cityssm.dateStringDifferenceInDays(0===f?t.startDateString:u.startDateString,u.endDateString)+1));var p="";for(h=f+g;h<7;h+=1)p+="<td></td>";var y=n[u.licenceTypeKey];m.insertAdjacentHTML("beforeend","<tr>"+b+'<td colspan="'+g+'"><a class="button has-text-left is-small is-block has-height-auto is-wrap is-primary is-light" data-tooltip="View Licence" href="/licences/'+u.licenceID+'"><div class="columns mb-0 is-variable is-1"><div class="column pb-2 is-narrow"><i class="fas fa-fw fa-certificate" aria-hidden="true"></i></div><div class="column pb-2 has-text-weight-semibold">'+u.externalLicenceNumber+"<br />"+(y||u.licenceTypeKey)+'</div></div><div class="columns mb-0 is-variable is-1"><div class="column pb-2 is-narrow"><i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i></div><div class="column pb-2">'+(""===u.locationName?u.locationAddress1:u.locationName)+'</div></div><div class="columns mb-0 is-variable is-1"><div class="column pb-2 is-narrow"><i class="fas fa-fw fa-users" aria-hidden="true"></i></div><div class="column pb-2">'+u.organizationName+'</div></div><div class="columns is-variable is-1"><div class="column is-narrow"><i class="fas fa-fw fa-calendar" aria-hidden="true"></i></div><div class="column">'+u.startDateString+(u.startDateString===u.endDateString?"":" to "+u.endDateString)+"</div></div></a></td>"+p+"</tr>")}c.appendChild(m);for(var D=[document.createElement("td"),document.createElement("td"),document.createElement("td"),document.createElement("td"),document.createElement("td"),document.createElement("td"),document.createElement("td")],w=0;w<t.events.length;w+=1){var S=t.events[w];y=n[S.licenceTypeKey];D[T=cityssm.dateStringToDate(S.eventDateString).getDay()].insertAdjacentHTML("beforeend",'<a class="button mb-2 has-text-left is-small is-block has-height-auto is-wrap is-link is-light" data-tooltip="View Event" href="/events/'+S.licenceID+"/"+S.eventDate+'"><div class="columns mb-0 is-variable is-1"><div class="column pb-2 is-narrow"><i class="fas fa-fw fa-clock" aria-hidden="true"></i></div><div class="column pb-2">'+S.startTimeString+'</div></div><div class="columns mb-0 is-variable is-1"><div class="column pb-2 is-narrow"><i class="fas fa-fw fa-certificate" aria-hidden="true"></i></div><div class="column pb-2 has-text-weight-semibold">'+S.externalLicenceNumber+"<br />"+(y||S.licenceTypeKey)+'</div></div><div class="columns mb-0 is-variable is-1"><div class="column pb-2 is-narrow"><i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i></div><div class="column pb-2">'+(""===S.locationName?S.locationAddress1:S.locationName)+'</div></div><div class="columns mb-0 is-variable is-1"><div class="column pb-2 is-narrow"><i class="fas fa-fw fa-users" aria-hidden="true"></i></div><div class="column pb-2">'+S.organizationName+"</div></div></a>")}for(var E=document.createElement("tr"),T=0;T<D.length;T+=1)E.appendChild(D[T]);var x=document.createElement("tbody");x.appendChild(E),c.appendChild(x),i.appendChild(c)}else i.innerHTML='<div class="message is-info"><p class="message-body">There are no licences or events with activity between '+t.startDateString+" and "+t.endDateString+".</p></div>"})}delete exports.config_licenceTypes,t.addEventListener("change",c),c(),a.addEventListener("change",function(){a.checked?document.getElementById("tbody--licences").classList.remove("is-hidden"):document.getElementById("tbody--licences").classList.add("is-hidden")})}();