"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(){const e=cityssm.dateToString(new Date),t=document.getElementById("filter--eventDate"),i=document.getElementById("filter--showLicences"),a=document.getElementById("container--events"),s=exports.config_days;delete exports.config_days;const n=exports.config_licenceTypes;function c(){cityssm.clearElement(a),""===t.value&&(t.value=cityssm.dateToString(new Date)),cityssm.postJSON("/events/doGetEventsByWeek",{eventDate:t.value},function(t){if(0===t.licences.length&&0===t.events.length)return void(a.innerHTML='<div class="message is-info"><p class="message-body">There are no licences or events with activity between '+t.startDateString+" and "+t.endDateString+".</p></div>");const c=document.createElement("table");c.className="table is-fixed is-fullwidth is-bordered";let d="<thead><tr>";const l=cityssm.dateStringToDate(t.startDateString);for(let t=0;t<=6;t+=1){const i=cityssm.dateToString(l);d+='<th class="has-text-centered'+(i===e?" has-background-primary has-text-white":" has-background-white-ter")+'">'+s[t]+"<br />"+i+"</th>",l.setDate(l.getDate()+1)}d+="</tr></thead>",c.innerHTML=d;const r=document.createElement("tbody");r.id="tbody--licences",i.checked||(r.className="is-hidden");for(let e=0;e<t.licences.length;e+=1){const i=t.licences[e];let a=0,s="";if(i.startDateString>t.startDateString){a=cityssm.dateStringDifferenceInDays(t.startDateString,i.startDateString);for(let e=0;e<a;e+=1)s+="<td></td>"}let c=1;i.startDateString!==i.endDateString&&(c=Math.min(7-a,cityssm.dateStringDifferenceInDays(0===a?t.startDateString:i.startDateString,i.endDateString)+1));let d="";for(let e=a+c;e<7;e+=1)d+="<td></td>";const l=n[i.licenceTypeKey];r.insertAdjacentHTML("beforeend","<tr>"+s+'<td colspan="'+c+'"><a class="button has-text-left is-small is-block has-height-auto is-wrap is-primary is-light" data-tooltip="View Licence" href="/licences/'+i.licenceID+'"><div class="columns mb-0 is-variable is-1"><div class="column pb-2 is-narrow"><i class="fas fa-fw fa-certificate" aria-hidden="true"></i></div><div class="column pb-2 has-text-weight-semibold">'+i.externalLicenceNumber+"<br />"+(l||i.licenceTypeKey)+'</div></div><div class="columns mb-0 is-variable is-1"><div class="column pb-2 is-narrow"><i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i></div><div class="column pb-2">'+(""===i.locationName?i.locationAddress1:i.locationName)+'</div></div><div class="columns mb-0 is-variable is-1"><div class="column pb-2 is-narrow"><i class="fas fa-fw fa-users" aria-hidden="true"></i></div><div class="column pb-2">'+i.organizationName+'</div></div><div class="columns is-variable is-1"><div class="column is-narrow"><i class="fas fa-fw fa-calendar" aria-hidden="true"></i></div><div class="column">'+i.startDateString+(i.startDateString===i.endDateString?"":" to "+i.endDateString)+"</div></div></a></td>"+d+"</tr>")}c.appendChild(r);const o=[document.createElement("td"),document.createElement("td"),document.createElement("td"),document.createElement("td"),document.createElement("td"),document.createElement("td"),document.createElement("td")];for(const e of t.events){const t=n[e.licenceTypeKey];o[cityssm.dateStringToDate(e.eventDateString).getDay()].insertAdjacentHTML("beforeend",'<a class="button mb-2 has-text-left is-small is-block has-height-auto is-wrap is-link is-light" data-tooltip="View Event" href="/events/'+e.licenceID+"/"+e.eventDate+'"><div class="columns mb-0 is-variable is-1"><div class="column pb-2 is-narrow"><i class="fas fa-fw fa-clock" aria-hidden="true"></i></div><div class="column pb-2">'+e.startTimeString+'</div></div><div class="columns mb-0 is-variable is-1"><div class="column pb-2 is-narrow"><i class="fas fa-fw fa-certificate" aria-hidden="true"></i></div><div class="column pb-2 has-text-weight-semibold">'+e.externalLicenceNumber+"<br />"+(t||e.licenceTypeKey)+'</div></div><div class="columns mb-0 is-variable is-1"><div class="column pb-2 is-narrow"><i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i></div><div class="column pb-2">'+(""===e.locationName?e.locationAddress1:e.locationName)+'</div></div><div class="columns mb-0 is-variable is-1"><div class="column pb-2 is-narrow"><i class="fas fa-fw fa-users" aria-hidden="true"></i></div><div class="column pb-2">'+e.organizationName+"</div></div></a>")}const m=document.createElement("tr");for(const e of o)m.appendChild(e);const v=document.createElement("tbody");v.appendChild(m),c.appendChild(v),a.appendChild(c)})}delete exports.config_licenceTypes,t.addEventListener("change",c),c(),i.addEventListener("change",function(){i.checked?document.getElementById("tbody--licences").classList.remove("is-hidden"):document.getElementById("tbody--licences").classList.add("is-hidden")})}();