(function(){function k(a){a.preventDefault();var d=a.currentTarget;llm.postJSON("/admin/doUpdateUserProperty",d,function(a){a.success&&(a=d.getElementsByClassName("input")[0],a.classList.add("is-success"),a.classList.remove("is-danger"),a=d.getElementsByTagName("button")[0],a.classList.add("is-success"),a.classList.remove("is-danger"))})}function l(a){a=a.currentTarget;a.classList.add("is-danger");a.classList.remove("is-primary");a.classList.remove("is-success");a=a.closest(".field").getElementsByTagName("button")[0];
a.classList.add("is-danger");a.classList.remove("is-primary");a.classList.remove("is-success")}function m(a){var d=a.currentTarget,c=d.getAttribute("data-user-name");a=d.getAttribute("data-first-name");for(var d=d.getAttribute("data-last-name"),b=0;b<h.length;b+=1)h[b].innerText=c;document.getElementById("updateUser--userName").value=c;document.getElementById("updateUser--firstName").value=a;document.getElementById("updateUser--lastName").value=d;var f=document.getElementById("container--userProperties");
llm.clearElement(f);llm.postJSON("/admin/doGetUserProperties",{userName:c},function(a){var d=0,b;for(b in a)if(a.hasOwnProperty(b)){var d=d+1,e=a[b],g=document.createElement("form");g.innerHTML='<input name="userName" type="hidden" value="'+c+'" /><input name="propertyName" type="hidden" value="'+b+'" /><div class="columns">'+('<div class="column is-4"><label class="label" for="userProperties--propertyValue-'+d+'">'+b+"</label></div>")+('<div class="column"><div class="field has-addons"><div class="control is-expanded">'+
('<input class="input is-primary" id="userProperties--propertyValue-'+d+'" name="propertyValue" type="text" value="'+llm.escapeHTML(e)+'" placeholder="(Use Default)" />')+'</div><div class="control"><button class="button is-outlined is-primary" type="submit">Save</button></div></div></div>')+"</div>";g.getElementsByClassName("input")[0].addEventListener("keyup",l);g.addEventListener("submit",k);f.insertAdjacentElement("beforeend",g)}});document.getElementById("resetPassword--userName").value=c;document.getElementById("resetPassword--newPassword").closest(".message").setAttribute("hidden",
"hidden");llm.showModal(e)}var f=document.getElementsByClassName("is-create-user-modal")[0];f.getElementsByTagName("form")[0].addEventListener("submit",function(a){a.preventDefault();llm.postJSON("/admin/doCreateUser",a.currentTarget,function(a){a.success&&window.location.reload(!0)})});document.getElementById("is-create-user-button").addEventListener("click",function(){llm.showModal(f)});for(var b=f.getElementsByClassName("is-cancel-button"),c=0;c<b.length;c+=1)b[c].addEventListener("click",llm.hideModal);
var b=document.getElementById("container--users"),e=document.getElementsByClassName("is-update-user-modal")[0],h=e.getElementsByClassName("container--userName");llm.initializeTabs(e.getElementsByClassName("tabs")[0].getElementsByTagName("ul")[0]);b=b.getElementsByTagName("a");for(c=0;c<b.length;c+=1)b[c].addEventListener("click",m);b=e.getElementsByClassName("is-cancel-button");for(c=0;c<b.length;c+=1)b[c].addEventListener("click",llm.hideModal);document.getElementById("tab--updateUser-name").getElementsByTagName("form")[0].addEventListener("submit",
function(a){a.preventDefault();llm.postJSON("/admin/doUpdateUser",a.currentTarget,function(a){a.success&&window.location.reload(!0)})});document.getElementById("tab--updateUser-password").getElementsByTagName("form")[0].addEventListener("submit",function(a){a.preventDefault();llm.postJSON("/admin/doResetPassword",a.currentTarget,function(a){if(a.success){var b=document.getElementById("resetPassword--newPassword");b.innerText=a.newPassword;b.closest(".message").removeAttribute("hidden")}})})})();
