(function(){function h(b){b.preventDefault();window.fetch("/admin/doUpdateUserProperty",{method:"POST",credentials:"include",body:new URLSearchParams(new FormData(b.currentTarget))}).then(function(a){return a.json()}).then(function(a){})}function k(b){var a=b.currentTarget,c=a.getAttribute("data-user-name");b=a.getAttribute("data-first-name");for(var a=a.getAttribute("data-last-name"),d=0;d<g.length;d+=1)g[d].innerText=c;document.getElementById("updateUser--userName").value=c;document.getElementById("updateUser--firstName").value=
b;document.getElementById("updateUser--lastName").value=a;document.getElementById("userProperties--userName").value=c;var f=document.getElementById("container--userProperties");window.llm.clearElement(f);window.fetch("/admin/doGetUserProperties",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({userName:c})}).then(function(a){return a.json()}).then(function(a){for(var b in a)if(a.hasOwnProperty(b)){var d=a[b],e=document.createElement("form");e.innerHTML=
'<input name="userName" type="hidden" value="'+c+'" /><input name="propertyName" type="hidden" value="'+b+'" /><div class="columns"><div class="column is-4">'+b+"</div>"+('<div class="column"><div class="field has-addons"><div class="control is-expanded"><input class="input" name="propertyValue" type="text" value="'+window.llm.escapeHTML(d)+'" /></div><div class="control"><button class="button" type="submit">Save</button></div></div></div>')+"</div>";e.addEventListener("submit",h);f.insertAdjacentElement("beforeend",
e)}});document.getElementById("resetPassword--userName").value=c;document.getElementById("resetPassword--newPassword").closest(".message").setAttribute("hidden","hidden");window.llm.showModal(e)}var f=document.getElementsByClassName("is-create-user-modal")[0];f.getElementsByTagName("form")[0].addEventListener("submit",function(b){b.preventDefault();window.fetch("/admin/doCreateUser",{method:"POST",credentials:"include",body:new URLSearchParams(new FormData(b.currentTarget))}).then(function(a){return a.json()}).then(function(a){a.success&&
window.location.reload(!0)})});document.getElementsByClassName("is-create-user-button")[0].addEventListener("click",function(){window.llm.showModal(f)});for(var d=f.getElementsByClassName("is-cancel-button"),c=0;c<d.length;c+=1)d[c].addEventListener("click",window.llm.hideModal);var d=document.getElementById("container--users"),e=document.getElementsByClassName("is-update-user-modal")[0],g=e.getElementsByClassName("container--userName");window.llm.initializeTabs(e.getElementsByClassName("tabs")[0].getElementsByTagName("ul")[0]);
d=d.getElementsByTagName("a");for(c=0;c<d.length;c+=1)d[c].addEventListener("click",k);d=e.getElementsByClassName("is-cancel-button");for(c=0;c<d.length;c+=1)d[c].addEventListener("click",window.llm.hideModal);document.getElementById("tab--updateUser-name").getElementsByTagName("form")[0].addEventListener("submit",function(b){b.preventDefault();window.fetch("/admin/doUpdateUser",{method:"POST",credentials:"include",body:new URLSearchParams(new FormData(b.currentTarget))}).then(function(a){return a.json()}).then(function(a){a.success&&
window.location.reload(!0)})});document.getElementById("tab--updateUser-password").getElementsByTagName("form")[0].addEventListener("submit",function(b){b.preventDefault();window.fetch("/admin/doResetPassword",{method:"POST",credentials:"include",body:new URLSearchParams(new FormData(b.currentTarget))}).then(function(a){return a.json()}).then(function(a){if(a.success){var b=document.getElementById("resetPassword--newPassword");b.innerText=a.newPassword;b.closest(".message").removeAttribute("hidden")}})})})();
