(function(){function l(b){return 0>b?'<span class="has-text-danger">($'+(-1*b).toFixed(2)+")</span>":"$"+b.toFixed(2)}function f(){e.classList.remove("has-status-view");e.classList.add("has-status-loading");cityssm.postJSON("/events/doGetFinancialSummary",v,function(f){for(var g=m.children,d=0;d<g.length;d+=1)g[d].classList.add("is-hidden");for(var h=d=g=0,n=0,p=0,q=0,r=0,t=0,u=0,k=0;k<f.length;k+=1){var a=f[k],c=m.querySelector("tr[data-licence-type-key='"+a.licenceTypeKey+"']");c.querySelector("[data-field='licenceCount']").innerText=
a.licenceCount;g+=a.licenceCount;c.querySelector("[data-field='eventCount']").innerHTML=(a.reportDateCount===a.eventCount?"":'<span class="has-text-danger" data-tooltip="Events Unreported">')+a.reportDateCount+"/"+a.eventCount+(a.reportDateCount===a.eventCount?"":"</span>");h+=a.reportDateCount;d+=a.eventCount;c.querySelector("[data-field='costs_receiptsSum']").innerText="$"+a.costs_receiptsSum.toFixed(2);n+=a.costs_receiptsSum;c.querySelector("[data-field='costs_adminSum']").innerText="$"+a.costs_adminSum.toFixed(2);
p+=a.costs_adminSum;c.querySelector("[data-field='costs_prizesAwardedSum']").innerText="$"+a.costs_prizesAwardedSum.toFixed(2);q+=a.costs_prizesAwardedSum;c.querySelector("[data-field='costs_netProceedsSum']").innerHTML=l(a.costs_netProceedsSum);r+=a.costs_netProceedsSum;c.querySelector("[data-field='costs_amountDonatedSum']").innerText="$"+a.costs_amountDonatedSum.toFixed(2);t+=a.costs_amountDonatedSum;c.querySelector("[data-field='licenceFeeSum']").innerText="$"+a.licenceFeeSum.toFixed(2);u+=a.licenceFeeSum;
c.classList.remove("is-hidden")}b.querySelector("[data-field='licenceCount']").innerText=g;b.querySelector("[data-field='eventCount']").innerHTML=(h===d?"":'<span class="has-text-danger" data-tooltip="Events Unreported">')+h+"/"+d+(h===d?"":"</span>");b.querySelector("[data-field='costs_receiptsSum']").innerText="$"+n.toFixed(2);b.querySelector("[data-field='costs_adminSum']").innerText="$"+p.toFixed(2);b.querySelector("[data-field='costs_prizesAwardedSum']").innerText="$"+q.toFixed(2);b.querySelector("[data-field='costs_netProceedsSum']").innerHTML=
l(r);b.querySelector("[data-field='costs_amountDonatedSum']").innerText="$"+t.toFixed(2);b.querySelector("[data-field='licenceFeeSum']").innerText="$"+u.toFixed(2);e.classList.remove("has-status-loading");e.classList.add("has-status-view")})}var v=document.getElementById("form--financialSummary"),e=document.getElementById("table--financialSummary"),m=e.getElementsByTagName("tbody")[0],b=e.getElementsByTagName("tfoot")[0];llm.initializeDateRangeSelector(document.querySelector(".is-date-range-selector[data-field-key='eventDate']"),
f);f()})();
