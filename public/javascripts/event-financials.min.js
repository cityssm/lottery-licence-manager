"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(()=>{const e=document.querySelector("main").getAttribute("data-url-prefix"),t=document.querySelector("#form--financialSummary"),o=document.querySelector("#table--financialSummary"),n=o.querySelector("tbody"),s=o.querySelector("tfoot"),a=e=>e<0?'<span class="has-text-danger">($'+(-1*e).toFixed(2)+")</span>":"$"+e.toFixed(2),r=()=>{o.classList.remove("has-status-view"),o.classList.add("has-status-loading"),cityssm.postJSON(e+"/events/doGetFinancialSummary",t,e=>{const t=n.children;for(const e of t)e.classList.add("is-hidden");let r=0,c=0,d=0,i=0,u=0,l=0,S=0,m=0,y=0;for(const t of e){const e=n.querySelector("tr[data-licence-type-key='"+t.licenceTypeKey+"']");e.querySelector("[data-field='licenceCount']").textContent=t.licenceCount.toString(),r+=t.licenceCount,e.querySelector("[data-field='eventCount']").innerHTML=(t.reportDateCount===t.eventCount?"":'<span class="has-text-danger" data-tooltip="Events Unreported">')+t.reportDateCount.toString()+"/"+t.eventCount.toString()+(t.reportDateCount===t.eventCount?"":"</span>"),d+=t.reportDateCount,c+=t.eventCount,e.querySelector("[data-field='costs_receiptsSum']").textContent="$"+t.costs_receiptsSum.toFixed(2),i+=t.costs_receiptsSum,e.querySelector("[data-field='costs_adminSum']").textContent="$"+t.costs_adminSum.toFixed(2),u+=t.costs_adminSum,e.querySelector("[data-field='costs_prizesAwardedSum']").textContent="$"+t.costs_prizesAwardedSum.toFixed(2),l+=t.costs_prizesAwardedSum,e.querySelector("[data-field='costs_netProceedsSum']").innerHTML=a(t.costs_netProceedsSum),S+=t.costs_netProceedsSum,e.querySelector("[data-field='costs_amountDonatedSum']").textContent="$"+t.costs_amountDonatedSum.toFixed(2),m+=t.costs_amountDonatedSum,e.querySelector("[data-field='licenceFeeSum']").textContent="$"+t.licenceFeeSum.toFixed(2),y+=t.licenceFeeSum,e.classList.remove("is-hidden")}s.querySelector("[data-field='licenceCount']").textContent=r.toString(),s.querySelector("[data-field='eventCount']").innerHTML=(d===c?"":'<span class="has-text-danger" data-tooltip="Events Unreported">')+d.toString()+"/"+c.toString()+(d===c?"":"</span>"),s.querySelector("[data-field='costs_receiptsSum']").textContent="$"+i.toFixed(2),s.querySelector("[data-field='costs_adminSum']").textContent="$"+u.toFixed(2),s.querySelector("[data-field='costs_prizesAwardedSum']").textContent="$"+l.toFixed(2),s.querySelector("[data-field='costs_netProceedsSum']").innerHTML=a(S),s.querySelector("[data-field='costs_amountDonatedSum']").textContent="$"+m.toFixed(2),s.querySelector("[data-field='licenceFeeSum']").textContent="$"+y.toFixed(2),o.classList.remove("has-status-loading"),o.classList.add("has-status-view")})};llm.initializeDateRangeSelector(document.querySelector(".is-date-range-selector[data-field-key='eventDate']"),r),r()})();