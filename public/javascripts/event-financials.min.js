"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(()=>{const e=document.getElementsByTagName("main")[0].getAttribute("data-url-prefix"),t=document.getElementById("form--financialSummary"),n=document.getElementById("table--financialSummary"),o=n.getElementsByTagName("tbody")[0],a=n.getElementsByTagName("tfoot")[0],s=e=>e<0?'<span class="has-text-danger">($'+(-1*e).toFixed(2)+")</span>":"$"+e.toFixed(2),r=()=>{n.classList.remove("has-status-view"),n.classList.add("has-status-loading"),cityssm.postJSON(e+"/events/doGetFinancialSummary",t,e=>{const t=o.children;for(const e of t)e.classList.add("is-hidden");let r=0,i=0,d=0,c=0,l=0,u=0,m=0,S=0,y=0;for(const t of e){const e=o.querySelector("tr[data-licence-type-key='"+t.licenceTypeKey+"']");e.querySelector("[data-field='licenceCount']").innerText=t.licenceCount.toString(),r+=t.licenceCount,e.querySelector("[data-field='eventCount']").innerHTML=(t.reportDateCount===t.eventCount?"":'<span class="has-text-danger" data-tooltip="Events Unreported">')+t.reportDateCount.toString()+"/"+t.eventCount.toString()+(t.reportDateCount===t.eventCount?"":"</span>"),d+=t.reportDateCount,i+=t.eventCount,e.querySelector("[data-field='costs_receiptsSum']").innerText="$"+t.costs_receiptsSum.toFixed(2),c+=t.costs_receiptsSum,e.querySelector("[data-field='costs_adminSum']").innerText="$"+t.costs_adminSum.toFixed(2),l+=t.costs_adminSum,e.querySelector("[data-field='costs_prizesAwardedSum']").innerText="$"+t.costs_prizesAwardedSum.toFixed(2),u+=t.costs_prizesAwardedSum,e.querySelector("[data-field='costs_netProceedsSum']").innerHTML=s(t.costs_netProceedsSum),m+=t.costs_netProceedsSum,e.querySelector("[data-field='costs_amountDonatedSum']").innerText="$"+t.costs_amountDonatedSum.toFixed(2),S+=t.costs_amountDonatedSum,e.querySelector("[data-field='licenceFeeSum']").innerText="$"+t.licenceFeeSum.toFixed(2),y+=t.licenceFeeSum,e.classList.remove("is-hidden")}a.querySelector("[data-field='licenceCount']").innerText=r.toString(),a.querySelector("[data-field='eventCount']").innerHTML=(d===i?"":'<span class="has-text-danger" data-tooltip="Events Unreported">')+d.toString()+"/"+i.toString()+(d===i?"":"</span>"),a.querySelector("[data-field='costs_receiptsSum']").innerText="$"+c.toFixed(2),a.querySelector("[data-field='costs_adminSum']").innerText="$"+l.toFixed(2),a.querySelector("[data-field='costs_prizesAwardedSum']").innerText="$"+u.toFixed(2),a.querySelector("[data-field='costs_netProceedsSum']").innerHTML=s(m),a.querySelector("[data-field='costs_amountDonatedSum']").innerText="$"+S.toFixed(2),a.querySelector("[data-field='licenceFeeSum']").innerText="$"+y.toFixed(2),n.classList.remove("has-status-loading"),n.classList.add("has-status-view")})};llm.initializeDateRangeSelector(document.querySelector(".is-date-range-selector[data-field-key='eventDate']"),r),r()})();