"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(){const e=document.getElementById("filter--inactiveYears"),t=document.getElementById("container--searchResults");function a(e){const t=e.currentTarget,a=cityssm.escapeHTML(t.getAttribute("data-location-display-name"));cityssm.confirmModal("Delete Location?","Are you sure you want delete "+a+"?","Yes, Delete","danger",function(){const e=t.getAttribute("data-location-id");cityssm.postJSON("/locations/doDelete",{locationID:e},function(e){e.success?(cityssm.alertModal(e.message,"","OK","success"),t.closest("tr").remove()):cityssm.alertModal(e.message,"","OK","danger")})})}function n(){t.innerHTML='<p class="has-text-centered has-text-grey-lighter"><i class="fas fa-3x fa-circle-notch fa-spin" aria-hidden="true"></i><br /><em>Loading locations...</em></p>',cityssm.postJSON("/locations/doGetInactive",{inactiveYears:e.value},function(e){if(0===e.length)return void(t.innerHTML='<div class="message is-info"><p class="message-body">There are no inactive locations to report.</p></div>');const n=document.createElement("table");n.className="table is-fullwidth is-striped is-hoverable",n.innerHTML='<thead><tr><th>Location</th><th class="has-text-centered">Last Licence End Date</th><th class="has-text-centered">Last Updated</th><th><span class="sr-only">Delete</span></th></tr></thead>';const s=document.createElement("tbody");for(let t=0;t<e.length;t+=1){const n=e[t],i=document.createElement("tr"),c=cityssm.escapeHTML(n.locationDisplayName);i.insertAdjacentHTML("beforeend",'<td><a data-tooltip="View Location" href="/locations/'+n.locationID+'">'+c+"</a>"+(n.locationDisplayName===n.locationAddress1?"":"<br /><small>"+cityssm.escapeHTML(n.locationAddress1)+"</small>")+"</td>");let o=n.licences_endDateMax,r=n.licences_endDateMaxString,d="Licence Location";n.distributor_endDateMax&&(!o||o<n.distributor_endDateMax)&&(o=n.distributor_endDateMax,r=n.distributor_endDateMaxString,d="Distributor"),n.manufacturer_endDateMax&&(!o||o<n.manufacturer_endDateMax)&&(o=n.manufacturer_endDateMax,r=n.manufacturer_endDateMaxString,d="Manufacturer"),i.insertAdjacentHTML("beforeend",'<td class="has-text-centered">'+(o?r+'<br /><span class="tag is-light is-info">'+d+"</span>":'<span class="tag is-light is-danger">No Licences</span>')+"</td>"),i.insertAdjacentHTML("beforeend",'<td class="has-text-centered"><span data-tooltip="Updated by '+n.recordUpdate_userName+'">'+n.recordUpdate_dateString+"</span></td>"),i.insertAdjacentHTML("beforeend",'<td class="has-text-right"><button class="button is-small is-danger" data-tooltip="Delete Location" data-location-id="'+n.locationID+'" data-location-display-name="'+c+'" type="button"><span class="icon"><i class="fas fa-trash" aria-hidden="true"></i></span> <span>Delete</span></button></td>'),i.getElementsByTagName("button")[0].addEventListener("click",a),s.insertAdjacentElement("beforeend",i)}n.insertAdjacentElement("beforeend",s),cityssm.clearElement(t),t.insertAdjacentElement("beforeend",n)})}e.addEventListener("change",n),n()}();