"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(){var e=document.getElementById("eventNav--eventDate"),t=document.getElementById("form--event"),n=document.getElementById("container--form-message"),a=document.getElementById("event--licenceID").value,s=document.getElementById("event--eventDate").value;function i(){cityssm.enableNavBlocker(),e&&e.setAttribute("disabled","disabled"),n.innerHTML='<span class="tag is-light is-info is-medium"><span class="icon"><i class="fas fa-exclamation-triangle" aria-hidden="true"></i></span> <span>Unsaved Changes</span></div>'}t.addEventListener("submit",function(a){a.preventDefault(),n.innerHTML='Saving... <i class="fas fa-circle-notch fa-spin" aria-hidden="true"></i>',cityssm.postJSON("/events/doSave",t,function(t){t.success&&(cityssm.disableNavBlocker(),e&&e.removeAttribute("disabled")),n.innerHTML="",cityssm.alertModal(t.message,"","OK",t.success?"success":"danger")})}),document.getElementById("is-delete-event-button").addEventListener("click",function(e){e.preventDefault(),cityssm.confirmModal("Delete Event?","Are you sure you want to delete this event?","Yes, Delete","danger",function(){cityssm.postJSON("/events/doDelete",{licenceID:a,eventDate:s},function(e){e.success&&(cityssm.disableNavBlocker(),window.location.href="/licences/"+a)})})});for(var c=t.querySelectorAll("input, select, textarea"),o=0;o<c.length;o+=1)""!==c[o].name&&c[o].addEventListener("change",i);document.getElementById("is-bank-information-lookup-button").addEventListener("click",function(e){var t,n;e.preventDefault();var s=function(e){e.preventDefault();var a=parseInt(e.currentTarget.getAttribute("data-list-index")),s=n[a];document.getElementById("event--bank_name").value=s.bank_name,document.getElementById("event--bank_address").value=s.bank_address,document.getElementById("event--bank_accountNumber").value=s.bank_accountNumber,i(),t()};cityssm.openHtmlModal("event-bankInformationLookup",{onshow:function(){var e=document.getElementById("container--bankInformationLookup");cityssm.postJSON("/events/doGetPastBankInformation",{licenceID:a},function(t){n=t;var a=document.createElement("div");a.className="list is-hoverable has-margin-bottom-10";for(var i=0;i<t.length;i+=1){var c=t[i],o=document.createElement("a");o.className="list-item",o.setAttribute("data-list-index",i.toString()),o.innerHTML='<div class="columns"><div class="column">'+cityssm.escapeHTML(c.bank_name)+'</div><div class="column">'+cityssm.escapeHTML(c.bank_address)+'</div><div class="column">'+cityssm.escapeHTML(c.bank_accountNumber)+'</div></div><div class="has-text-right"><span class="tag is-info" data-tooltip="Last Used Event Date">'+c.eventDateMaxString+"</span></div>",o.addEventListener("click",s),a.insertAdjacentElement("beforeend",o)}cityssm.clearElement(e),e.insertAdjacentElement("beforeend",a)})},onshown:function(e,n){t=n}})});var d=document.getElementById("event--costs_receipts"),l=document.getElementById("event--costs_admin"),r=document.getElementById("event--costs_prizesAwarded"),m=document.getElementById("event--costs_netProceeds"),u=document.getElementById("event--costs_amountDonated");function v(){var e=(parseFloat(d.value||"0")-parseFloat(l.value||"0")-parseFloat(r.value||"0")).toFixed(2);m.value=e,u.setAttribute("max",e)}d.addEventListener("keyup",v),l.addEventListener("keyup",v),r.addEventListener("keyup",v)}();