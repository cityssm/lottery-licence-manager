(function(){function h(){window.llm.enableNavBlocker();f.setAttribute("disabled","disabled");c.innerHTML='<div class="has-text-info"><i class="fas fa-exclamation-triangle" aria-hidden="true"></i> Unsaved Changes</div>'}var f=document.getElementById("eventNav--eventDate"),d=document.getElementById("form--event"),c=document.getElementById("container--form-message"),g=document.getElementById("event--licenceID").value,k=document.getElementById("event--eventDate").value;d.addEventListener("submit",function(b){b.preventDefault();
c.innerHTML='Saving... <i class="fas fa-circle-notch fa-spin" aria-hidden="true"></i>';window.fetch("/events/doSave",{method:"POST",credentials:"include",body:new URLSearchParams(new FormData(d))}).then(function(a){return a.json()}).then(function(a){a.success&&(window.llm.disableNavBlocker(),f.removeAttribute("disabled"));c.innerHTML="";window.llm.alertModal(a.message,"","OK",a.success?"success":"danger")})});document.getElementsByClassName("is-delete-button")[0].addEventListener("click",function(b){b.preventDefault();
window.llm.confirmModal("Delete Event?","Are you sure you want to delete this event?","Yes, Delete","danger",function(){window.fetch("/events/doDelete",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({licenceID:g,eventDate:k})}).then(function(a){return a.json()}).then(function(a){a.success&&(window.llm.disableNavBlocker(),window.location.href="/licences/"+g)})})});for(var e=d.querySelectorAll("input, select, textarea"),b=0;b<e.length;b+=1)""!==
e[b].name&&e[b].addEventListener("change",h)})();
