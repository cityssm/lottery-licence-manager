(function(){function p(){window.llm.enableNavBlocker();h.innerHTML='<div class="is-size-7 has-text-info"><i class="fas fa-exclamation-triangle"></i> Unsaved Changes</div>'}var g=document.getElementById("form--organization"),h=document.getElementById("container--form-message"),k=""===document.getElementById("organization--organizationID").value,l=document.getElementById("organization--organizationID").value;g.addEventListener("submit",function(b){b.preventDefault();window.fetch("/organizations/doSave",
{method:"post",credentials:"include",body:new URLSearchParams(new FormData(g))}).then(function(a){return a.json()}).then(function(a){window.llm.disableNavBlocker();a.success&&k?window.location.href="/organizations/"+a.organizationID+"/edit":h.innerHTML='<div class="is-size-7 '+(a.success?"has-text-success":"has-text-danger")+'">'+a.message+"</div>"})});if(!k){var e=document.getElementsByClassName("is-representative-table")[0].getElementsByTagName("tbody")[0];0===e.getElementsByTagName("tr").length&&
(e.innerHTML='<tr class="has-background-warning is-empty-warning"><td class="has-text-centered" colspan="6"><strong>There are no representatives associated with this organization.</strong></td></tr>');for(var m=function(b){window.fetch("/organizations/"+l+"/doSetDefaultRepresentative",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({isDefaultRepresentativeIndex:b.currentTarget.value})}).then(function(a){return a.json()})},d=e.getElementsByTagName("input"),
b=0;b<d.length;b+=1)d[b].addEventListener("change",m);var f=document.getElementsByClassName("is-add-representative-modal")[0],n=f.getElementsByTagName("form")[0];document.getElementsByClassName("is-add-representative-button")[0].addEventListener("click",function(){n.reset();window.llm.showModal(f)});d=f.getElementsByClassName("is-cancel-button");for(b=0;b<d.length;b+=1)d[b].addEventListener("click",window.llm.hideModal);n.addEventListener("submit",function(b){b.preventDefault();window.fetch("/organizations/"+
l+"/doAddOrganizationRepresentative",{method:"POST",credentials:"include",body:new URLSearchParams(new FormData(b.currentTarget))}).then(function(a){return a.json()}).then(function(a){if(a.success){var c=e.getElementsByClassName("is-empty-warning");0<c.length&&c[0].remove();a=a.organizationRepresentative;c=document.createElement("tr");c.setAttribute("data-representative-index",a.RepresentativeIndex);c.setAttribute("data-representative-name",a.RepresentativeName);c.setAttribute("data-representative-title",
a.RepresentativeTitle);c.setAttribute("data-representative-address-1",a.RepresentativeAddress1);c.setAttribute("data-representative-address-2",a.RepresentativeAddress2);c.setAttribute("data-representative-city",a.RepresentativeCity);c.setAttribute("data-representative-province",a.RepresentativeProvince);c.setAttribute("data-representative-postal-code",a.RepresentativePostalCode);c.insertAdjacentHTML("beforeend",'<td class="has-text-centered"><div class="field"><input class="is-checkradio is-info" id="representative-isDefault--'+
a.RepresentativeIndex+'" name="representative-isDefault" type="radio"'+(a.IsDefault?" checked":"")+' />&nbsp;<label for="representative-isDefault--'+a.RepresentativeIndex+'"></label></div></td>');c.getElementsByTagName("input")[0].addEventListener("change",m);var b=document.createElement("td");b.innerHTML=a.RepresentativeName+"<br />"+a.RepresentativeTitle;c.insertAdjacentElement("beforeend",b);b=document.createElement("td");b.innerHTML=a.RepresentativeAddress1+"<br />"+a.RepresentativeAddress2;c.insertAdjacentElement("beforeend",
b);b=document.createElement("td");b.innerHTML=a.RepresentativeCity+", "+a.RepresentativeProvince;c.insertAdjacentElement("beforeend",b);b=document.createElement("td");b.innerHTML=a.RepresentativePostalCode;c.insertAdjacentElement("beforeend",b);c.insertAdjacentHTML("beforeend",'<td class="has-text-right"><a class="is-edit-representative-button" href="#"><i class="fas fa-pencil-alt"></i></a></td>');e.insertAdjacentElement("beforeend",c);window.llm.hideModal(f)}})})}d=g.getElementsByClassName("input");
for(b=0;b<d.length;b+=1)d[b].addEventListener("change",p)})();
