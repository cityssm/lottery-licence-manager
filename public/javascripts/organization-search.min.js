"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(){var e=document.getElementById("form--filters"),t=document.getElementById("container--searchResults"),a="true"===document.getElementsByTagName("main")[0].getAttribute("data-can-create");function n(){t.innerHTML='<p class="has-text-centered has-text-grey-lighter"><i class="fas fa-3x fa-circle-notch fa-spin" aria-hidden="true"></i><br /><em>Loading organizations...</em></p>',cityssm.postJSON("/organizations/doSearch",e,function(e){if(0!==e.length){t.innerHTML='<table class="table is-fullwidth is-striped is-hoverable"><thead><tr><th colspan="2">Organization Name</th><th>Default Representative</th>'+(a?'<th class="is-hidden-print"><span class="sr-only">Organization Options</span></th>':"")+"<th>Licences</th>"+(a?'<th class="is-hidden-print"><span class="sr-only">Licence Options</span></th>':"")+"</tr></thead><tbody></tbody></table>";for(var n=t.getElementsByTagName("tbody")[0],i=0;i<e.length;i+=1){var s=e[i],r=document.createElement("tr");r.innerHTML="<td></td>";var o=document.createElement("a");s.isEligibleForLicences?o.setAttribute("data-tooltip","View Organization"):(o.className="has-text-danger",o.setAttribute("data-tooltip","Not Eligible for New Licences")),o.innerText=s.organizationName,o.href="/organizations/"+s.organizationID,r.getElementsByTagName("td")[0].insertAdjacentElement("beforeend",o),r.insertAdjacentHTML("beforeend",'<td class="has-text-right">'+(""===s.organizationNote?"":'<span class="tag has-cursor-default is-info is-light" data-tooltip="'+cityssm.escapeHTML(s.organizationNote.length>30?s.organizationNote.substring(0,27)+"...":s.organizationNote)+'"><i class="fas fa-sticky-note mr-2" aria-hidden="true"></i> Note</span>')+"</td>"),r.insertAdjacentHTML("beforeend","<td>"+(s.representativeName||'<span class="has-text-grey">(No Representatives)</span>')+"</td>"),a&&r.insertAdjacentHTML("beforeend",'<td class="has-text-right is-hidden-print">'+(s.canUpdate?'<a class="button is-small" data-tooltip="Edit Organization" href="/organizations/'+s.organizationID+'/edit"><span class="icon"><i class="fas fa-pencil-alt" aria-hidden="true"></i></span><span>Edit</span></a>':"")+"</td>");var c="";s.licences_activeCount>0?c='<span class="tag has-cursor-default is-info" data-tooltip="Number of Active Licences"><i class="fas fa-certificate mr-2" aria-hidden="true"></i> '+s.licences_activeCount+"</span>":s.licences_endDateMax&&(c='<span class="tag has-cursor-default is-info is-light" data-tooltip="Last Licence End Date"><i class="fas fa-stop mr-2" aria-hidden="true"></i> '+s.licences_endDateMaxString+"</span>"),r.insertAdjacentHTML("beforeend","<td>"+c+"</td>"),a&&r.insertAdjacentHTML("beforeend",'<td class="has-text-right is-hidden-print">'+(s.isEligibleForLicences?'<a class="button is-small" data-tooltip="Create a New Licence" href="/licences/new/'+s.organizationID+'"><span class="icon"><i class="fas fa-certificate" aria-hidden="true"></i></span><span>New</span></a>':"")+"</td>"),n.insertAdjacentElement("beforeend",r)}}else t.innerHTML='<div class="message is-info"><div class="message-body"><strong>Your search returned no results.</strong><br />Please try expanding your search criteria.</div></div>'})}e.addEventListener("submit",function(e){e.preventDefault()});for(var i=e.querySelectorAll(".input, .select"),s=0;s<i.length;s+=1)i[s].addEventListener("change",n);n()}();