(function(){function k(){g.innerHTML='<p class="has-text-centered has-text-grey-lighter"><i class="fas fa-3x fa-circle-notch fa-spin" aria-hidden="true"></i><br /><em>Loading organizations...</em></p>';window.fetch("/organizations/doSearch",{method:"POST",credentials:"include",body:new URLSearchParams(new FormData(e))}).then(function(f){return f.json()}).then(function(f){if(0===f.length)g.innerHTML='<div class="message is-info"><div class="message-body"><strong>Your search returned no results.</strong><br />Please try expanding your search criteria.</div></div>';
else{g.innerHTML='<table class="table is-fullwidth is-striped is-hoverable"><thead><tr><th colspan="2">Organization</th><th>Default Representative</th>'+(h?'<th class="is-hidden-print"><span class="sr-only">Organization Options</span></th>':"")+"<th>Licences</th>"+(h?'<th class="is-hidden-print"><span class="sr-only">Licence Options</span></th>':"")+"</tr></thead><tbody></tbody></table>";for(var e=g.getElementsByTagName("tbody")[0],c=0;c<f.length;c+=1){var a=f[c],d=document.createElement("tr");d.innerHTML=
"<td></td>";var b=document.createElement("a");a.isEligibleForLicences||(b.className="has-text-danger",b.setAttribute("data-tooltip","Not Eligible for New Licences"));b.innerText=a.organizationName;b.href="/organizations/"+a.organizationID;d.getElementsByTagName("td")[0].insertAdjacentElement("beforeend",b);d.insertAdjacentHTML("beforeend",'<td class="has-text-right">'+(""===a.organizationNote?"":'<span class="tag has-cursor-default is-info is-light" data-tooltip="'+window.llm.escapeHTML(30<a.organizationNote.length?
a.organizationNote.substring(0,27)+"...":a.organizationNote)+'"><i class="fas fa-sticky-note has-margin-right-5" aria-hidden="true"></i> Note</span>')+"</td>");d.insertAdjacentHTML("beforeend","<td>"+a.representativeName+"</td>");h&&d.insertAdjacentHTML("beforeend",'<td class="has-text-right is-hidden-print">'+(a.canUpdate?'<a class="button is-small" data-tooltip="Edit Organization" href="/organizations/'+a.organizationID+'/edit"><span class="icon"><i class="fas fa-pencil-alt" aria-hidden="true"></i></span><span>Edit</span></a>':
"")+"</td>");b="";0<a.licences_activeCount?b='<span class="tag has-cursor-default is-info" data-tooltip="Number of Active Licences"><i class="fas fa-certificate has-margin-right-5" aria-hidden="true"></i> '+a.licences_activeCount+"</span>":a.licences_endDateMax&&(b='<span class="tag has-cursor-default is-info is-light" data-tooltip="Last Licence End Date"><i class="fas fa-stop has-margin-right-5" aria-hidden="true"></i> '+a.licences_endDateMaxString+"</span>");d.insertAdjacentHTML("beforeend","<td>"+
b+"</td>");h&&d.insertAdjacentHTML("beforeend",'<td class="has-text-right is-hidden-print">'+(a.isEligibleForLicences?'<a class="button is-small" data-tooltip="Create a New Licence" href="/licences/new/'+a.organizationID+'"><span class="icon"><i class="fas fa-certificate" aria-hidden="true"></i></span><span>New</span></a>':"")+"</td>");e.insertAdjacentElement("beforeend",d)}}})}var e=document.getElementById("form--filters"),g=document.getElementById("container--searchResults"),h="true"===document.getElementsByTagName("main")[0].getAttribute("data-can-create");
e.addEventListener("submit",function(c){c.preventDefault()});for(var l=e.querySelectorAll(".input, .select"),c=0;c<l.length;c+=1)l[c].addEventListener("change",k);k()})();
