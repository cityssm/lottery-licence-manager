"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(()=>{var e,t,n;const s=exports.dateDiff,a=null===(e=document.querySelector("main"))||void 0===e?void 0:e.dataset.urlPrefix,c=document.querySelector("#form--outstandingEvents"),i=document.querySelector("#tbody--outstandingEvents");function r(){cityssm.clearElement(i),cityssm.postJSON(`${a}/events/doGetOutstandingEvents`,c,e=>{var t;const n=e,c=new Date;let r=-1;for(const e of n){r!==e.organizationID&&(r=e.organizationID,i.insertAdjacentHTML("beforeend",`<tr>\n                <th class="has-background-grey-lighter" colspan="9">\n                  <h2 class="title is-4">\n                    ${cityssm.escapeHTML(null!==(t=e.organizationName)&&void 0!==t?t:"")}\n                  </h2>\n                </th>\n                </tr>`));const n=document.createElement("tr"),o=`${a}/licences/${e.licenceID.toString()}`;n.insertAdjacentHTML("beforeend",`<td>\n              <a href="${cityssm.escapeHTML(o)}" data-tooltip="View Licence" target="_blank">\n                ${cityssm.escapeHTML(e.externalLicenceNumber)}<br / >\n                <small>\n                  Licence #${cityssm.escapeHTML(e.licenceID.toString())}\n                </small>\n              </a>\n              </td>`),n.insertAdjacentHTML("beforeend",`<td>${cityssm.escapeHTML(e.licenceType)}</td>`);const d=`${a}/events/${e.licenceID.toString()}/${e.eventDate.toString()}`,l=cityssm.dateStringToDate(e.eventDateString);n.insertAdjacentHTML("beforeend",`<td>\n              <a href="${cityssm.escapeHTML(d)}" data-tooltip="View Event" target="_blank">\n                ${cityssm.escapeHTML(e.eventDateString)}\n              </a>\n              ${l<c?`<br />\n                      <span class="is-size-7">\n                        ${cityssm.escapeHTML(s(l,c).formatted)}\n                        ago\n                      </span>`:""}</td>`),n.insertAdjacentHTML("beforeend",`<td class="has-text-centered">\n              ${null===e.reportDate||0===e.reportDate?'<span class="icon" data-tooltip="Report Date Not Recorded">\n                      <i class="fas fa-times has-text-danger" aria-hidden="true"></i>\n                      </span>\n                      <span class="sr-only">Report Date Not Recorded</span>':cityssm.escapeHTML(e.reportDateString)}\n              </td>`),n.insertAdjacentHTML("beforeend",`<td class="has-text-centered">\n              ${e.bank_name_isOutstanding?'<span class="icon" data-tooltip="Banking Information Outstanding">\n                      <i class="fas fa-times has-text-danger" aria-hidden="true"></i>\n                      </span>\n                      <span class="sr-only">Banking Information Outstanding</span>':'<span class="icon" data-tooltip="Banking Information Recorded">\n                      <i class="fas fa-check has-text-success" aria-hidden="true"></i>\n                      </span>\n                      <span class="sr-only">Banking Information Recorded</span>'}\n              </td>`),n.insertAdjacentHTML("beforeend",`<td class="has-text-centered">\n              ${null===e.costs_receiptsSum||0===e.costs_receiptsSum?'<span class="icon" data-tooltip="Receipts Amount Outstanding">\n                      <i class="fas fa-times has-text-danger" aria-hidden="true"></i>\n                      </span>\n                      <span class="sr-only">Receipts Amount Outstanding</span>':'<span class="icon" data-tooltip="Receipts Amount Recorded">\n                      <i class="fas fa-check has-text-success" aria-hidden="true"></i>\n                      </span>\n                      <span class="sr-only">Receipts Amount Recorded</span>'}\n              </td>`),i.append(n)}})}null===(t=document.querySelector("#filter--licenceTypeKey"))||void 0===t||t.addEventListener("change",r),null===(n=document.querySelector("#filter--eventDateType"))||void 0===n||n.addEventListener("change",r),r()})();