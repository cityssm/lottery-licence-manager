"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(()=>{const e=exports.dateDiff,t=document.querySelector("main").getAttribute("data-url-prefix"),s=document.querySelector("#form--outstandingEvents"),a=document.querySelector("#tbody--outstandingEvents"),n=()=>{cityssm.clearElement(a),cityssm.postJSON(t+"/events/doGetOutstandingEvents",s,s=>{const n=new Date;let c=-1;for(const i of s){c!==i.organizationID&&(c=i.organizationID,a.insertAdjacentHTML("beforeend",'<tr><th class="has-background-grey-lighter" colspan="9"><h2 class="title is-4">'+cityssm.escapeHTML(i.organizationName)+"</h2></th></tr>"));const s=document.createElement("tr"),r=t+"/licences/"+i.licenceID.toString();s.insertAdjacentHTML("beforeend",'<td><a href="'+cityssm.escapeHTML(r)+'" data-tooltip="View Licence" target="_blank">'+cityssm.escapeHTML(i.externalLicenceNumber)+"<br / > <small>Licence #"+i.licenceID.toString()+"</small></a></td>"),s.insertAdjacentHTML("beforeend","<td>"+cityssm.escapeHTML(i.licenceType)+"</td>");const o=t+"/events/"+i.licenceID.toString()+"/"+i.eventDate.toString(),d=cityssm.dateStringToDate(i.eventDateString);s.insertAdjacentHTML("beforeend",'<td><a href="'+cityssm.escapeHTML(o)+'" data-tooltip="View Event" target="_blank">'+cityssm.escapeHTML(i.eventDateString)+"</a>"+(d<n?'<br /><span class="is-size-7">'+e(d,n).formatted+" ago</span>":"")+"</td>"),s.insertAdjacentHTML("beforeend",'<td class="has-text-centered">'+(null===i.reportDate||0===i.reportDate?'<span class="icon" data-tooltip="Report Date Not Recorded"><i class="fas fa-times has-text-danger" aria-hidden="true"></i></span><span class="sr-only">Report Date Not Recorded</span>':i.reportDateString)+"</td>"),s.insertAdjacentHTML("beforeend",'<td class="has-text-centered">'+(i.bank_name_isOutstanding?'<span class="icon" data-tooltip="Banking Information Outstanding"><i class="fas fa-times has-text-danger" aria-hidden="true"></i></span><span class="sr-only">Banking Information Outstanding</span>':'<span class="icon" data-tooltip="Banking Information Recorded"><i class="fas fa-check has-text-success" aria-hidden="true"></i></span><span class="sr-only">Banking Information Recorded</span>')+"</td>"),s.insertAdjacentHTML("beforeend",'<td class="has-text-centered">'+(null===i.costs_receiptsSum||0===i.costs_receiptsSum?'<span class="icon" data-tooltip="Receipts Amount Outstanding"><i class="fas fa-times has-text-danger" aria-hidden="true"></i></span><span class="sr-only">Receipts Amount Outstanding</span>':'<span class="icon" data-tooltip="Receipts Amount Recorded"><i class="fas fa-check has-text-success" aria-hidden="true"></i></span><span class="sr-only">Receipts Amount Recorded</span>')+"</td>"),a.append(s)}})};document.querySelector("#filter--licenceTypeKey").addEventListener("change",n),document.querySelector("#filter--licenceTypeKey").addEventListener("change",n),n()})();