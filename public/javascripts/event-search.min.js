(function(){function d(){e.innerHTML='<p class="has-text-centered has-text-grey-lighter"><i class="fas fa-3x fa-circle-notch fa-spin" aria-hidden="true"></i><br /><em>Loading events...</p>';var d=c.value,k=b.options[b.selectedIndex].text;window.fetch("/events/doSearch",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({year:d,month:b.value})}).then(function(b){return b.json()}).then(function(b){if(0===b.length)e.innerHTML='<div class="message is-info"><div class="message-body">There are no lottery events scheduled in '+
k+" "+d+".</div></div>";else{e.innerHTML="";for(var c=0,f,h=0;h<b.length;h+=1){var a=b[h],g=l[a.licenceTypeKey],g=g?g.licenceType:a.licenceTypeKey;c!==a.eventDate&&(0!==c&&e.insertAdjacentElement("beforeend",f),c=a.eventDate,e.insertAdjacentHTML("beforeend",'<h2 class="title is-4">'+a.eventDateString+"</h2>"),f=document.createElement("ul"),f.className="list");f.insertAdjacentHTML("beforeend",'<li class="list-item"><div class="columns">'+('<div class="column is-1"><a href="/events/'+a.licenceID+"/"+
a.eventDate+'">'+window.llm.escapeHTML(a.externalLicenceNumber)+"<br /><small>Licence #"+a.licenceID+"</small></a></div>")+('<div class="column">'+window.llm.escapeHTML(a.organizationName)+"</div>")+('<div class="column">'+g+"<br /><small>"+window.llm.escapeHTML(a.licenceDetails)+"</small></div>")+('<div class="column">'+window.llm.escapeHTML(a.locationDisplayName)+"<br /><small>"+a.startTimeString+(a.startTimeString===a.endTimeString?"":" to "+a.endTimeString)+"</small></div>")+'<div class="column is-1-desktop is-hidden-print has-text-right">'+
(a.canUpdate?'<a class="button is-small" href="/events/'+a.licenceID+"/"+a.eventDate+'/edit"><span class="icon"><i class="fas fa-pencil-alt" aria-hidden="true"></i></span><span>Edit</span></a>':"")+"</div></div></li>")}e.insertAdjacentElement("beforeend",f)}})}var l=window.llm.arrayToObject(config_licenceTypes,"licenceTypeKey"),b=document.getElementById("filter--month"),c=document.getElementById("filter--year"),e=document.getElementById("container--events");document.getElementById("filter--previous").addEventListener("click",
function(){"1"===b.value?(b.value="12",c.value=parseInt(c.value)-1):b.value=parseInt(b.value)-1;d()});document.getElementById("filter--next").addEventListener("click",function(){"12"===b.value?(b.value="1",c.value=parseInt(c.value)+1):b.value=parseInt(b.value)+1;d()});b.addEventListener("change",d);c.addEventListener("change",d);d()})();
