(function(){function d(){e.innerHTML='<p class="has-text-centered has-text-grey-lighter"><i class="fas fa-3x fa-circle-notch fa-spin" aria-hidden="true"></i><br /><em>Loading events...</p>';var d=c.value,k=a.options[a.selectedIndex].text;window.fetch("/events/doSearch",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({year:d,month:a.value})}).then(function(a){return a.json()}).then(function(a){if(0===a.length)e.innerHTML='<div class="message is-info"><div class="message-body">There are no lottery events scheduled in '+
k+" "+d+".</div></div>";else{e.innerHTML="";for(var c=0,f,h=0;h<a.length;h+=1){var b=a[h],g=l[b.licenceTypeKey],g=g?g.licenceType:b.licenceTypeKey;c!==b.eventDate&&(0!==c&&e.insertAdjacentElement("beforeend",f),c=b.eventDate,e.insertAdjacentHTML("beforeend",'<h2 class="title is-4">'+b.eventDateString+"</h2>"),f=document.createElement("ul"),f.className="list");f.insertAdjacentHTML("beforeend",'<li class="list-item"><div class="columns">'+('<div class="column is-1"><a href="/events/'+b.licenceID+"/"+
b.eventDate+'">'+window.llm.escapeHTML(b.externalLicenceNumber)+"<br /><small>Licence #"+b.licenceID+"</small></a></div>")+('<div class="column">'+window.llm.escapeHTML(b.organizationName)+"</div>")+('<div class="column">'+g+"<br /><small>"+window.llm.escapeHTML(b.licenceDetails)+"</small></div>")+('<div class="column">'+window.llm.escapeHTML(b.location)+"<br /><small>"+b.startTimeString+" to "+b.endTimeString+"</small></div>")+(m?'<div class="column is-narrow is-hidden-print"><a class="button is-small" href="/events/'+
b.licenceID+"/"+b.eventDate+'/edit"><span class="icon"><i class="fas fa-pencil-alt" aria-hidden="true"></i></span><span>Edit</span></a></div>':"")+"</div></li>")}e.insertAdjacentElement("beforeend",f)}})}var l=window.llm.arrayToObject(config_licenceTypes,"licenceTypeKey"),a=document.getElementById("filter--month"),c=document.getElementById("filter--year"),e=document.getElementById("container--events"),m="true"===document.getElementsByTagName("main")[0].getAttribute("data-can-update");document.getElementById("filter--previous").addEventListener("click",
function(){"1"===a.value?(a.value="12",c.value=parseInt(c.value)-1):a.value=parseInt(a.value)-1;d()});document.getElementById("filter--next").addEventListener("click",function(){"12"===a.value?(a.value="1",c.value=parseInt(c.value)+1):a.value=parseInt(a.value)+1;d()});a.addEventListener("change",d);c.addEventListener("change",d);d()})();
