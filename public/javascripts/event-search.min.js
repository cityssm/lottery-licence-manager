"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(()=>{const e=document.querySelector("main").getAttribute("data-url-prefix"),t=document.querySelector("#filter--externalLicenceNumber"),a=document.querySelector("#filter--licenceTypeKey"),n=document.querySelector("#filter--organizationName"),i=document.querySelector("#filter--locationName"),c=document.querySelector("#filter--year"),s=document.querySelector("#container--events"),r=()=>{s.innerHTML='<p class="has-text-centered has-text-grey-lighter"><i class="fas fa-3x fa-circle-notch fa-spin" aria-hidden="true"></i><br /><em>Loading events...</p>',cityssm.postJSON(e+"/events/doSearch",{externalLicenceNumber:t.value,licenceTypeKey:a.value,organizationName:n.value,locationName:i.value,eventYear:c.value},t=>{if(0===t.length)return void(s.innerHTML='<div class="message is-info"><div class="message-body">Your search returned no results.</div></div>');const a=document.createElement("tbody");for(const n of t){const t=exports.config_licenceTypes[n.licenceTypeKey]||n.licenceTypeKey,i=e+"/events/"+n.licenceID.toString()+"/"+n.eventDate.toString(),c=document.createElement("tr");c.innerHTML='<td><a href="'+cityssm.escapeHTML(i)+'">'+n.eventDateString+"</a></td><td>"+cityssm.escapeHTML(n.externalLicenceNumber)+"<br /><small>Licence #"+n.licenceID.toString()+"</small></td><td>"+cityssm.escapeHTML(n.organizationName)+"</td><td>"+t+"<br /><small>"+cityssm.escapeHTML(n.licenceDetails)+"</small></td><td>"+(n.locationDisplayName?cityssm.escapeHTML(n.locationDisplayName):'<span class="has-text-grey">(No Location)</span>')+"<br /><small>"+n.startTimeString+(n.startTimeString===n.endTimeString?"":" to "+n.endTimeString)+'</small></td><td class="is-hidden-print has-text-right">'+(n.canUpdate?'<a class="button is-small" href="'+cityssm.escapeHTML(i)+'/edit"><span class="icon"><i class="fas fa-pencil-alt" aria-hidden="true"></i></span><span>Edit</span></a>':"")+"</td>",a.append(c)}cityssm.clearElement(s);const n=document.createElement("table");n.className="table is-fullwidth is-striped is-hoverable",n.innerHTML="<thead><tr><th>Event Date</th><th>Licence</th><th>Organization</th><th>Licence Type</th><th>Location</th><th></th></tr></thead>",n.append(a),s.append(n)})};t.addEventListener("change",r),a.addEventListener("change",r),n.addEventListener("change",r),i.addEventListener("change",r),c.addEventListener("change",r),r()})();