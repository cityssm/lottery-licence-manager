(function(){function c(){f.innerHTML='<p class="has-text-centered has-text-grey-lighter"><i class="fas fa-3x fa-circle-notch fa-spin" aria-hidden="true"></i><br /><em>Loading events...</p>';cityssm.postJSON("/events/doSearch",{externalLicenceNumber:g.value,licenceTypeKey:d.value,eventYear:e.value},function(b){if(0===b.length)f.innerHTML='<div class="message is-info"><div class="message-body">Your search returned no results.</div></div>';else{for(var c=document.createElement("tbody"),h=0;h<b.length;h+=
1){var a=b[h],g=llm.config_licenceTypes[a.licenceTypeKey]||a.licenceTypeKey,d="/events/"+a.licenceID+"/"+a.eventDate,e=document.createElement("tr");e.innerHTML='<td><a href="'+d+'">'+a.eventDateString+"</a></td>"+("<td>"+cityssm.escapeHTML(a.externalLicenceNumber)+"<br /><small>Licence #"+a.licenceID+"</small></td>")+("<td>"+cityssm.escapeHTML(a.organizationName)+"</td>")+("<td>"+g+"<br /><small>"+cityssm.escapeHTML(a.licenceDetails)+"</small></td>")+("<td>"+cityssm.escapeHTML(a.locationDisplayName)+
"<br /><small>"+a.startTimeString+(a.startTimeString===a.endTimeString?"":" to "+a.endTimeString)+"</small></td>")+('<td class="is-hidden-print has-text-right">'+(a.canUpdate?'<a class="button is-small" href="'+d+'/edit"><span class="icon"><i class="fas fa-pencil-alt" aria-hidden="true"></i></span><span>Edit</span></a>':"")+"</td>");c.appendChild(e)}cityssm.clearElement(f);b=document.createElement("table");b.className="table is-fullwidth is-striped is-hoverable";b.innerHTML="<thead><tr><th>Event Date</th><th>Licence</th><th>Organization</th><th>Licence Type</th><th>Location</th><th></th></tr></thead>";
b.appendChild(c);f.appendChild(b)}})}var g=document.getElementById("filter--externalLicenceNumber"),d=document.getElementById("filter--licenceTypeKey"),e=document.getElementById("filter--year"),f=document.getElementById("container--events");g.addEventListener("change",c);d.addEventListener("change",c);e.addEventListener("change",c);c()})();
