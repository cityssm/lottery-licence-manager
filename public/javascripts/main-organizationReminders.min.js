"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),llm.organizationReminders=(()=>{let e;const n=new Map,t=(e,n)=>{cityssm.postJSON("/organizations/doGetReminders",{organizationID:e},n)},i=(e,n,t)=>{cityssm.postJSON("/organizations/doDeleteReminder",{organizationID:e,reminderIndex:n},t)};return{getRemindersByOrganizationID:t,getReminderByID:(e,n,t)=>{cityssm.postJSON("/organizations/doGetReminder",{organizationID:e,reminderIndex:n},t)},openAddReminderModal:(i,r)=>{let o;const d=e=>{e.preventDefault(),cityssm.postJSON("/organizations/doAddReminder",e.currentTarget,e=>{e.success&&(o(),r&&r(e.reminder))})},s=e=>{const t=e.currentTarget.value,i=n.get(t),r=document.getElementById("addReminder--reminderStatus");r.value="",r.innerHTML='<option value="">(Not Set)</option>';for(const e of i.reminderStatuses){const n=document.createElement("option");n.value=e,n.innerText=e,r.appendChild(n)}};(t=>{0===n.size?llm.getDefaultConfigProperty("reminderCategories",i=>{e=i;for(const t of e)for(const e of t.reminderTypes)e.reminderCategory=t.reminderCategory,n.set(e.reminderTypeKey,e);t&&t()}):t&&t()})(()=>{cityssm.openHtmlModal("reminderAdd",{onshow(){document.getElementById("addReminder--organizationID").value=i.toString(),document.getElementById("addReminder--reminderDateString").setAttribute("min",cityssm.dateToString(new Date)),t(i,n=>{const t=document.getElementById("addReminder--reminderTypeKey");for(const i of e){if(!i.isActive)continue;const e=document.createElement("optgroup");e.label=i.reminderCategory;for(const t of i.reminderTypes){if(!t.isActive)continue;if(t.hasUndismissedLimit&&n.find(e=>e.reminderTypeKey===t.reminderTypeKey&&""===e.dismissedDateString))continue;const i=document.createElement("option");i.value=t.reminderTypeKey,i.innerText=t.reminderType,e.appendChild(i)}t.appendChild(e)}t.addEventListener("change",s),t.closest(".select").classList.remove("is-loading")}),document.getElementById("form--addReminder").addEventListener("submit",d)},onshown(e,n){o=n}})})},openEditReminderModal:(e,n,t)=>{},deleteReminder:(e,n,t,r)=>{t?cityssm.confirmModal("Delete Reminder?","Are you sure you want to delete this reminder?","Yes, Delete","danger",()=>{i(e,n,r)}):i(e,n,r)},getReminderType:e=>n.get(e)}})();