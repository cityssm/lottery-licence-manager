(function(){function g(){e.innerHTML='<p class="has-text-centered has-text-grey-lighter"><i class="fas fa-3x fa-circle-notch fa-spin" aria-hidden="true"></i><br /><em>Loading licences...</em></p>';llm.postJSON("/licences/doSearch",c,function(b){if(0===b.length)e.innerHTML='<div class="message is-info"><div class="message-body"><strong>Your search returned no results.</strong><br />Please try expanding your search criteria.</div></div>';else{e.innerHTML='<table class="table is-fullwidth is-striped is-hoverable"><thead><tr><th>'+
k+'</th><th>Licence</th><th>Organization Name</th><th>Location</th><th>Dates</th><th class="is-hidden-print"><span class="sr-only">Options</span></th></tr></thead><tbody></tbody></table>';for(var d=e.getElementsByTagName("tbody")[0],c=0;c<b.length;c+=1){var a=b[c],g=h[a.licenceTypeKey],f=document.createElement("tr");f.innerHTML='<td><a href="/licences/'+a.licenceID+'">'+llm.escapeHTML(a.externalLicenceNumber)+"<br /><small>Licence #"+a.licenceID+"</small></a></td><td>"+(g||a.licenceTypeKey)+"<br /><small>"+
llm.escapeHTML(a.licenceDetails)+"</small></td><td>"+llm.escapeHTML(a.organizationName)+"</td><td>"+llm.escapeHTML(a.locationDisplayName)+"</td>"+('<td class="is-nowrap"><span class="has-cursor-default has-tooltip-right" data-tooltip="Start Date"><i class="fas fa-fw fa-play" aria-hidden="true"></i> '+a.startDateString+'</span><br /><span class="has-cursor-default has-tooltip-right" data-tooltip="End Date"><i class="fas fa-fw fa-stop" aria-hidden="true"></i> '+a.endDateString+"</span></td>")+'<td class="has-text-right is-nowrap is-hidden-print">'+
(a.canUpdate?'<a class="button is-small" data-tooltip="Edit Licence" href="/licences/'+a.licenceID+'/edit"><span class="icon"><i class="fas fa-pencil-alt" aria-hidden="true"></i></span><span>Edit</span></a> ':"")+(a.issueDate?'<a class="button is-small" data-tooltip="Print Licence" href="/licences/'+a.licenceID+'/print" target="_blank" download><i class="fas fa-print" aria-hidden="true"></i><span class="sr-only">Print</span></a>':'<span class="tag is-warning">Not Issued</span>')+"</div></td>";d.insertAdjacentElement("beforeend",
f)}}})}for(var h={},c=document.getElementById("form--filters"),e=document.getElementById("container--searchResults"),k=e.getAttribute("data-external-licence-number-label"),d=document.getElementById("filter--licenceTypeKey").getElementsByTagName("option"),b=1;b<d.length;b+=1){var f=d[b];h[f.value]=f.innerText}c.addEventListener("submit",function(b){b.preventDefault()});d=c.querySelectorAll(".input, .select select");for(b=0;b<d.length;b+=1)d[b].addEventListener("change",g);g()})();
