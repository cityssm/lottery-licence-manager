"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(){var e={},t=document.getElementById("form--filters"),a=document.getElementById("filter--limit"),n=document.getElementById("filter--offset"),i=document.getElementById("container--searchResults"),s=i.getAttribute("data-external-licence-number-label");function l(){n.value="0",function l(){var c=parseInt(a.value,10),r=parseInt(n.value,10);i.innerHTML='<p class="has-text-centered has-text-grey-lighter"><i class="fas fa-3x fa-circle-notch fa-spin" aria-hidden="true"></i><br /><em>Loading licences...</em></p>',cityssm.postJSON("/licences/doSearch",t,function(t){var a=t.licences;if(0!==a.length){i.innerHTML='<table class="table is-fullwidth is-striped is-hoverable"><thead><tr><th>'+s+'</th><th>Licence</th><th>Organization Name</th><th>Location</th><th>Active Date Range</th><th class="is-hidden-print"><span class="sr-only">Options</span></th></tr></thead><tbody></tbody></table>';for(var o=i.getElementsByTagName("tbody")[0],d=0;d<a.length;d+=1){var p=a[d],u=e[p.licenceTypeKey],m=document.createElement("tr");m.innerHTML='<td><a data-tooltip="View Licence" href="/licences/'+p.licenceID+'">'+cityssm.escapeHTML(p.externalLicenceNumber)+"<br /><small>Licence #"+p.licenceID+"</small></a></td><td>"+(u||p.licenceTypeKey)+"<br /><small>"+cityssm.escapeHTML(p.licenceDetails)+'</small></td><td><a data-tooltip="View Organization" href="/organizations/'+p.organizationID+'">'+cityssm.escapeHTML(p.organizationName)+'</a></td><td><a data-tooltip="View Location" href="/locations/'+p.locationID+'">'+cityssm.escapeHTML(p.locationDisplayName)+"</a>"+(p.locationDisplayName===p.locationAddress1?"":"<br /><small>"+cityssm.escapeHTML(p.locationAddress1)+"</small>")+'</td><td class="is-nowrap"><span class="has-cursor-default has-tooltip-right" data-tooltip="Start Date"><i class="fas fa-fw fa-play" aria-hidden="true"></i> '+p.startDateString+'</span><br /><span class="has-cursor-default has-tooltip-right" data-tooltip="End Date"><i class="fas fa-fw fa-stop" aria-hidden="true"></i> '+p.endDateString+'</span></td><td class="has-text-right is-nowrap is-hidden-print">'+(p.canUpdate?'<a class="button is-small" data-tooltip="Edit Licence" href="/licences/'+p.licenceID+'/edit"><span class="icon"><i class="fas fa-pencil-alt" aria-hidden="true"></i></span><span>Edit</span></a> ':"")+(p.issueDate?'<a class="button is-small" data-tooltip="Print Licence" href="/licences/'+p.licenceID+'/print" download><i class="fas fa-print" aria-hidden="true"></i><span class="sr-only">Print</span></a>':'<span class="tag is-warning">Not Issued</span>')+"</div></td>",o.insertAdjacentElement("beforeend",m)}if(i.insertAdjacentHTML("beforeend",'<div class="level is-block-print"><div class="level-left has-text-weight-bold">Displaying licences '+(r+1)+" to "+Math.min(c+r,t.count)+" of "+t.count+"</div></div>"),c<t.count){var f=document.createElement("nav");if(f.className="level-right is-hidden-print",f.setAttribute("role","pagination"),f.setAttribute("aria-label","pagination"),r>0){var h=document.createElement("a");h.className="button",h.innerText="Previous",h.addEventListener("click",function(e){e.preventDefault(),n.value=Math.max(0,r-c).toString(),l()}),f.insertAdjacentElement("beforeend",h)}if(c+r<t.count){var g=document.createElement("a");g.className="button ml-3",g.innerHTML='<span>Next Licences</span><span class="icon"><i class="fas fa-chevron-right" aria-hidden="true"></i></span>',g.addEventListener("click",function(e){e.preventDefault(),n.value=(r+c).toString(),l()}),f.insertAdjacentElement("beforeend",g)}i.getElementsByClassName("level")[0].insertAdjacentElement("beforeend",f)}}else i.innerHTML='<div class="message is-info"><div class="message-body"><strong>Your search returned no results.</strong><br />Please try expanding your search criteria.</div></div>'})}()}for(var c=document.getElementById("filter--licenceTypeKey").getElementsByTagName("option"),r=1;r<c.length;r+=1){var o=c[r];e[o.value]=o.innerText}t.addEventListener("submit",function(e){e.preventDefault()});for(var d=t.querySelectorAll(".input, .select select"),p=0;p<d.length;p+=1)d[p].addEventListener("change",l);l()}();