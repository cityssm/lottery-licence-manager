(function(){function e(){if(0===f.length)g.innerHTML='<div class="message is-info"><div class="message-body"><strong>There are no locations on record.</strong></div></div>';else{var b=50;g.innerHTML='<table class="table is-fullwidth is-striped is-hoverable"><thead><tr><th>Location</th><th>Address</th><th>Last Used</th></tr></thead><tbody></tbody></table>';for(var e=g.getElementsByTagName("tbody")[0],h=0;h<f.length;h+=1){for(var a=f[h],d=!0,c=m.value.trim().toLowerCase().split(" "),k=0;k<c.length;k+=
1){var l=c[k];if(-1===a.locationName.toLowerCase().indexOf(l)&&-1===a.locationAddress1.toLowerCase().indexOf(l)&&-1===a.locationAddress2.toLowerCase().indexOf(l)){d=!1;break}}if(d&&(--b,d=document.createElement("tr"),d.innerHTML="<td></td>",c=document.createElement("a"),c.innerText=""===a.locationName?a.locationAddress1:a.locationName,c.href="/locations/"+a.locationID,d.getElementsByTagName("td")[0].insertAdjacentElement("beforeend",c),e.insertAdjacentElement("beforeend",d),c=document.createElement("td"),
c.innerHTML=window.llm.escapeHTML(a.locationAddress1)+"<br /><small>"+window.llm.escapeHTML(a.locationAddress2)+"</small>",d.insertAdjacentElement("beforeend",c),d.insertAdjacentHTML("beforeend","<td>"+(""===a.licences_endDateMaxString?'<span class="has-text-grey">Not Used</span>':a.licences_endDateMaxString)+"</td>"),0===b))break}0===b&&g.insertAdjacentHTML("beforeend",'<div class="message is-warning"><p class="message-body">Display Limit Reached</p></div>')}}var m=document.getElementById("filter--locationNameAddress"),
g=document.getElementById("container--searchResults"),f=[];window.fetch("/locations/doGetLocations",{method:"POST",credentials:"include"}).then(function(b){return b.json()}).then(function(b){f=b;e()});document.getElementById("form--filters").addEventListener("submit",function(b){b.preventDefault()});m.addEventListener("keyup",e)})();
