(function(){function c(){if(0===f.length)g.innerHTML='<div class="message is-info"><div class="message-body"><strong>There are no locations on record.</strong></div></div>';else{var e=50,c=m.value,p=n.value;g.innerHTML='<table class="table is-fullwidth is-striped is-hoverable"><thead><tr><th>Location</th><th>Address</th><th class="has-text-centered">Licences</th><th class="has-text-centered">Distributor</th><th class="has-text-centered">Manufacturer</th></tr></thead><tbody></tbody></table>';for(var r=
g.getElementsByTagName("tbody")[0],k=0;k<f.length;k+=1){var a=f[k],b=!0;if(""===c||parseInt(c)===a.locationIsDistributor)if(""===p||parseInt(p)===a.locationIsManufacturer){for(var d=q.value.trim().toLowerCase().split(" "),l=0;l<d.length;l+=1){var h=d[l];if(-1===a.locationName.toLowerCase().indexOf(h)&&-1===a.locationAddress1.toLowerCase().indexOf(h)&&-1===a.locationAddress2.toLowerCase().indexOf(h)&&-1===a.locationCity.toLowerCase().indexOf(h)){b=!1;break}}if(b&&(--e,b=document.createElement("tr"),
b.innerHTML="<td></td>",d=document.createElement("a"),d.innerText=a.locationDisplayName,d.href="/locations/"+a.locationID,b.getElementsByTagName("td")[0].insertAdjacentElement("beforeend",d),r.insertAdjacentElement("beforeend",b),d=document.createElement("td"),d.innerHTML=window.llm.escapeHTML(a.locationAddress1)+(""===a.locationAddress2?"":"<br /><small>"+window.llm.escapeHTML(a.locationAddress2)+"</small>")+(""===a.locationCity?"":"<br /><small>"+window.llm.escapeHTML(a.locationCity)+", "+a.locationProvince+
"</small>"),b.insertAdjacentElement("beforeend",d),b.insertAdjacentHTML("beforeend",'<td class="has-text-centered">'+(""===a.licences_endDateMaxString?'<span class="has-text-grey">Not Used</span>':a.licences_endDateMaxString)+"</td>"),b.insertAdjacentHTML("beforeend",'<td class="has-text-centered">'+(a.locationIsDistributor?'<span data-tooltip="Distributor"><span class="tag is-success">Yes</span><br />'+(""===a.distributor_endDateMaxString?'<span class="has-text-grey">Never Used</span>':a.distributor_endDateMaxString)+
"</span>":'<span class="sr-only">No</span>')+"</td>"),b.insertAdjacentHTML("beforeend",'<td class="has-text-centered">'+(a.locationIsManufacturer?'<span data-tooltip="Manufacturer"><span class="tag is-success">Yes</span><br />'+(""===a.manufacturer_endDateMaxString?'<span class="has-text-grey">Never Used</span>':a.manufacturer_endDateMaxString)+"</span>":'<span class="sr-only">No</span>')+"</td>"),0===e))break}}0===e&&g.insertAdjacentHTML("beforeend",'<div class="message is-warning"><p class="message-body">Display Limit Reached</p></div>')}}
var q=document.getElementById("filter--locationNameAddress"),m=document.getElementById("filter--locationIsDistributor"),n=document.getElementById("filter--locationIsManufacturer"),g=document.getElementById("container--searchResults"),f=[];window.fetch("/locations/doGetLocations",{method:"POST",credentials:"include"}).then(function(c){return c.json()}).then(function(e){f=e;c()});q.addEventListener("keyup",c);m.addEventListener("change",c);n.addEventListener("change",c)})();
