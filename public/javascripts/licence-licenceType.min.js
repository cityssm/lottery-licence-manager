"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(){var e=document.getElementById("form--licenceTypes"),t=document.getElementById("container--licenceTypes"),n="";function a(){cityssm.clearElement(t),t.innerHTML='<p class="has-text-centered has-text-grey-lighter"><i class="fas fa-3x fa-circle-notch fa-spin" aria-hidden="true"></i><br /><em>Loading report...</em></p>',cityssm.postJSON("/licences/doGetLicenceTypeSummary",e,function(e){if(cityssm.clearElement(t),0!==e.length){var a=document.createElement("table");a.className="table is-fullwidth is-striped is-hoverable",a.innerHTML="<thead><tr><th>Application Date</th><th>Issue Date</th><th>"+n+'</th><th>Organization</th><th>Location</th><th class="has-text-right">Prize Value</th><th class="has-text-right">Licence Fee</th></tr></thead>';for(var i=document.createElement("tbody"),c=0,s=0,r=0,l=0;l<e.length;l+=1){var d=e[l],o=document.createElement("tr");o.insertAdjacentHTML("beforeend","<td>"+d.applicationDateString+"</td>"),o.insertAdjacentHTML("beforeend","<td>"+d.issueDateString+"</td>"),o.insertAdjacentHTML("beforeend",'<td><a data-tooltip="View Licence" href="/licences/'+d.licenceID+'">'+cityssm.escapeHTML(d.externalLicenceNumber)+"<br /><small>Licence #"+d.licenceID+"</small></a></td>"),o.insertAdjacentHTML("beforeend","<td>"+cityssm.escapeHTML(d.organizationName)+"</td>"),o.insertAdjacentHTML("beforeend","<td>"+cityssm.escapeHTML(d.locationDisplayName)+"</td>"),o.insertAdjacentHTML("beforeend",'<td class="is-nowrap has-text-right">$ '+d.totalPrizeValue.toFixed(2)+"</td>"),o.insertAdjacentHTML("beforeend",'<td class="is-nowrap has-text-right">$ '+d.licenceFee.toFixed(2)+"</td>"),i.insertAdjacentElement("beforeend",o),d.issueDate&&d.issueDate>0&&(c+=1),s+=d.totalPrizeValue,r+=d.licenceFee,d.transactionAmountSum}a.insertAdjacentElement("beforeend",i);var h=document.createElement("tfoot");h.innerHTML="<tr><th>"+e.length+" licence"+(1===e.length?"":"s")+"</th><th>"+c+' issued</th><td></td><td></td><td></td><th class="is-nowrap has-text-right">$ '+s.toFixed(2)+'</th><th class="is-nowrap has-text-right">$ '+r.toFixed(2)+"</th></tr>",a.insertAdjacentElement("beforeend",h),t.insertAdjacentElement("beforeend",a)}else t.innerHTML='<div class="message is-info"><p class="message-body">There are no licences available that meet your search criteria.</p></div>'})}llm.getDefaultConfigProperty("externalLicenceNumber_fieldLabel",function(e){n=e,a()}),llm.initializeDateRangeSelector(document.querySelector(".is-date-range-selector[data-field-key='applicationDate']"),a),document.getElementById("filter--licenceTypeKey").addEventListener("change",a)}();