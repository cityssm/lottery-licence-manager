(function(){function d(){llm.clearElement(e);e.innerHTML='<p class="has-text-centered has-text-grey-lighter"><i class="fas fa-3x fa-circle-notch fa-spin" aria-hidden="true"></i><br /><em>Loading report...</em></p>';llm.postJSON("/licences/doGetLicenceTypeSummary",n,function(c){llm.clearElement(e);if(0===c.length)e.innerHTML='<div class="message is-info"><p class="message-body">There are no licences available that meet your search criteria.</p></div>';else{var f=document.createElement("table");f.className=
"table is-fullwidth";f.innerHTML="<thead><tr><th>Application Date</th><th>Issue Date</th><th>"+k+'</th><th>Organization</th><th>Location</th><th class="has-text-right">Prize Value</th><th class="has-text-right">Licence Fee</th></tr></thead>';for(var g=document.createElement("tbody"),d=0,l=0,m=0,h=0;h<c.length;h+=1){var a=c[h],b=document.createElement("tr");b.insertAdjacentHTML("beforeend","<td>"+a.applicationDateString+"</td>");b.insertAdjacentHTML("beforeend","<td>"+a.issueDateString+"</td>");b.insertAdjacentHTML("beforeend",
'<td><a href="/licences/'+a.licenceID+'">'+llm.escapeHTML(a.externalLicenceNumber)+"<br /><small>Licence #"+a.licenceID+"</small></a></td>");b.insertAdjacentHTML("beforeend","<td>"+llm.escapeHTML(a.organizationName)+"</td>");b.insertAdjacentHTML("beforeend","<td>"+llm.escapeHTML(a.locationDisplayName)+"</td>");b.insertAdjacentHTML("beforeend",'<td class="is-nowrap has-text-right">$ '+a.totalPrizeValue.toFixed(2)+"</td>");b.insertAdjacentHTML("beforeend",'<td class="is-nowrap has-text-right">$ '+a.licenceFee.toFixed(2)+
"</td>");g.insertAdjacentElement("beforeend",b);a.issueDate&&0<a.issueDate&&(d+=1);l+=a.totalPrizeValue;m+=a.licenceFee}f.insertAdjacentElement("beforeend",g);g=document.createElement("tfoot");g.innerHTML="<tr><th>"+c.length+" licence"+(1===c.length?"":"s")+"</th><th>"+d+' issued</th><td></td><td></td><td></td><th class="is-nowrap has-text-right">$ '+l.toFixed(2)+'</th><th class="is-nowrap has-text-right">$ '+m.toFixed(2)+"</th></tr>";f.insertAdjacentElement("beforeend",g);e.insertAdjacentElement("beforeend",
f)}})}var n=document.getElementById("form--licenceTypes"),e=document.getElementById("container--licenceTypes"),k="";llm.getDefaultConfigProperty("externalLicenceNumber_fieldLabel",function(c){k=c;d()});llm.initializeDateRangeSelector(document.querySelector(".is-date-range-selector[data-field-key='applicationDate']"),d);document.getElementById("filter--licenceTypeKey").addEventListener("change",d)})();
