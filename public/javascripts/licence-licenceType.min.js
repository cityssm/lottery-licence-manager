"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(()=>{const e=document.querySelector("main").dataset.urlPrefix,t=document.querySelector("#form--licenceTypes"),a=document.querySelector("#container--licenceTypes");let n="";const i=()=>{cityssm.clearElement(a),a.innerHTML='<p class="has-text-centered has-text-grey-lighter"><i class="fas fa-3x fa-circle-notch fa-spin" aria-hidden="true"></i><br /><em>Loading report...</em></p>',cityssm.postJSON(e+"/licences/doGetLicenceTypeSummary",t,t=>{if(cityssm.clearElement(a),0===t.length)return void(a.innerHTML='<div class="message is-info"><p class="message-body">There are no licences available that meet your search criteria.</p></div>');const i=document.createElement("table");i.className="table is-fullwidth is-striped is-hoverable has-sticky-header",i.innerHTML="<thead><tr><th>Application Date</th><th>Issue Date</th><th>"+n+'</th><th>Organization</th><th>Location</th><th class="has-text-right">Prize Value</th><th class="has-text-right">Licence Fee</th></tr></thead>';const s=document.createElement("tbody");let c=0,r=0,l=0;for(const a of t){const t=document.createElement("tr");t.insertAdjacentHTML("beforeend","<td>"+a.applicationDateString+"</td>"),t.insertAdjacentHTML("beforeend","<td>"+a.issueDateString+"</td>"),t.insertAdjacentHTML("beforeend",'<td><a data-tooltip="View Licence" href="'+cityssm.escapeHTML(e)+"/licences/"+a.licenceID.toString()+'">'+cityssm.escapeHTML(a.externalLicenceNumber)+"<br /><small>Licence #"+a.licenceID.toString()+"</small></a></td>"),t.insertAdjacentHTML("beforeend","<td>"+cityssm.escapeHTML(a.organizationName)+"</td>"),t.insertAdjacentHTML("beforeend","<td>"+(a.locationDisplayName?cityssm.escapeHTML(a.locationDisplayName):'<span class="has-text-grey">(No Location)</span>')+"</td>"),t.insertAdjacentHTML("beforeend",'<td class="is-nowrap has-text-right">$ '+a.totalPrizeValue.toFixed(2)+"</td>"),t.insertAdjacentHTML("beforeend",'<td class="is-nowrap has-text-right">$ '+a.licenceFee.toFixed(2)+"</td>"),s.append(t),a.issueDate&&a.issueDate>0&&(c+=1),r+=a.totalPrizeValue,l+=a.licenceFee}i.append(s);const o=document.createElement("tfoot");o.innerHTML="<tr><th>"+t.length.toString()+" licence"+(1===t.length?"":"s")+"</th><th>"+c.toString()+' issued</th><th></th><th></th><th></th><th class="is-nowrap has-text-right">$ '+r.toFixed(2)+'</th><th class="is-nowrap has-text-right">$ '+l.toFixed(2)+"</th></tr>",i.append(o),a.append(i)})};llm.initializeDateRangeSelector(document.querySelector(".is-date-range-selector[data-field-key='applicationDate']"),i),document.querySelector("#filter--licenceTypeKey").addEventListener("change",i),llm.getDefaultConfigProperty("externalLicenceNumber_fieldLabel",e=>{n=e,i()})})();