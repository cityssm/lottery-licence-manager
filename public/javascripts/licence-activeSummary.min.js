(function(){function b(){d.innerHTML='<p class="has-text-centered has-text-grey-lighter"><i class="fas fa-3x fa-circle-notch fa-spin" aria-hidden="true"></i><br /><em>Loading licences...</em></p>';cityssm.postJSON("/licences/doGetActiveLicenceSummary",k,function(c){if(0===c.length)d.innerHTML='<div class="message is-info"><p class="message-body">There are no active licences on the selected time range.</p></div>';else{var e=document.createElement("table");e.className="table is-striped is-hoverable is-fullwidth";
e.innerHTML="<thead><tr><th>"+g+"</th><th>Licence Type</th><th>Organization</th><th>Location</th><th>Issue Date</th><th>Licence Start Date</th><th>Licence End Date</th></tr></thead>";for(var b=document.createElement("tbody"),f=0;f<c.length;f+=1){var a=c[f],h=document.createElement("tr");h.innerHTML='<td><a href="/licences/'+a.licenceID+'" data-tooltip="View Licence">'+cityssm.escapeHTML(a.externalLicenceNumber)+"<br /><small>Licence #"+a.licenceID+"</small></a></td>"+("<td>"+(llm.config_licenceTypes[a.licenceTypeKey]||
a.licenceTypeKey)+"</td>")+('<td><a href="/organizations/'+a.organizationID+'" data-tooltip="View Organization">'+cityssm.escapeHTML(a.organizationName)+"</a></td>")+('<td><a href="/locations/'+a.locationID+'" data-tooltip="View Location">'+cityssm.escapeHTML(a.locationDisplayName)+"</a>"+(a.locationDisplayName===a.locationName?"<br /><small>"+cityssm.escapeHTML(a.locationAddress1)+"</small>":"")+"</td>")+('<td class="is-nowrap">'+a.issueDateString+"</td>")+('<td class="is-nowrap"><span class="icon"><i class="fas fa-play" aria-hidden="true"></i></span> '+
a.startDateString+"</td>")+('<td class="is-nowrap"><span class="icon"><i class="fas fa-stop" aria-hidden="true"></i></span> '+a.endDateString+"</td>");b.insertAdjacentElement("beforeend",h)}e.insertAdjacentElement("beforeend",b);cityssm.clearElement(d);d.insertAdjacentElement("beforeend",e)}})}var g="",k=document.getElementById("form--activeSummary"),d=document.getElementById("container--activeSummary");llm.initializeDateRangeSelector(document.querySelector(".is-date-range-selector[data-field-key='startEndDate']"),
b);llm.getDefaultConfigProperty("externalLicenceNumber_fieldLabel",function(c){g=c;b()})})();
