(function(){function k(){window.llm.enableNavBlocker();d.innerHTML='<div class="has-text-info"><i class="fas fa-exclamation-triangle" aria-hidden="true"></i> Unsaved Changes</div>'}var c=document.getElementById("form--location"),d=document.getElementById("container--form-message"),g=document.getElementById("location--locationID").value,e=""===g;c.addEventListener("submit",function(b){b.preventDefault();d.innerHTML='Saving... <i class="fas fa-circle-notch fa-spin" aria-hidden="true"></i>';window.fetch(e?
"/locations/doCreate":"/locations/doUpdate",{method:"POST",credentials:"include",body:new URLSearchParams(new FormData(c))}).then(function(a){return a.json()}).then(function(a){a.success&&window.llm.disableNavBlocker();a.success&&e?window.location.href="/locations/"+a.locationID+"/edit":(d.innerHTML="",window.llm.alertModal(a.message,"","OK",a.success?"success":"danger"))})});if(!e){var l=function(){window.fetch("/locations/doDelete",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},
body:JSON.stringify({locationID:g})}).then(function(b){return b.json()}).then(function(b){b.success&&(window.location.href="/locations")})};c.getElementsByClassName("is-delete-button")[0].addEventListener("click",function(){window.llm.confirmModal("Delete Location?","Are you sure you want to delete this location?<br />Note that any active licences associated with this location will remain active.","Yes, Delete Location","warning",l)})}for(var h=c.getElementsByClassName("input"),f=0;f<h.length;f+=
1)h[f].addEventListener("change",k)})();
