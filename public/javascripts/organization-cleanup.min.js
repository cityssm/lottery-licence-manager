"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(){var e="true"===document.getElementsByTagName("main")[0].getAttribute("data-can-update"),t=document.getElementById("filter--inactiveYears"),a=document.getElementById("container--searchResults");function n(e){var t=e.currentTarget,a=cityssm.escapeHTML(t.getAttribute("data-organization-name"));cityssm.confirmModal("Delete Organization?","Are you sure you want delete "+a+"?","Yes, Delete","danger",function(){var e=t.getAttribute("data-organization-id");cityssm.postJSON("/organizations/doDelete",{organizationID:e},function(e){e.success?(cityssm.alertModal(e.message,"","OK","success"),t.closest("tr").remove()):cityssm.alertModal(e.message,"","OK","danger")})})}function s(){a.innerHTML='<p class="has-text-centered has-text-grey-lighter"><i class="fas fa-3x fa-circle-notch fa-spin" aria-hidden="true"></i><br /><em>Loading organizations...</em></p>',cityssm.postJSON("/organizations/doGetInactive",{inactiveYears:t.value},function(t){if(0!==t.length){var s=document.createElement("table");s.className="table is-fullwidth is-striped is-hoverable",s.innerHTML='<thead><tr><th>Organization</th><th class="has-text-centered">Last Licence End Date</th><th class="has-text-centered">Created</th><th class="has-text-centered">Last Updated</th>'+(e?'<th><span class="sr-only">Delete</span></th>':"")+"</tr></thead>";for(var i=document.createElement("tbody"),r=0;r<t.length;r+=1){var d=t[r],o=document.createElement("tr"),c=cityssm.escapeHTML(d.organizationName);o.innerHTML='<td><a data-tooltip="View Organization" href="/organizations/'+d.organizationID+'">'+c+'</a></td><td class="has-text-centered">'+(d.licences_endDateMax?d.licences_endDateMaxString:'<span class="tag is-light is-danger">No Licences</span>')+'</td><td class="has-text-centered"><span data-tooltip="Created by '+d.recordCreate_userName+'">'+d.recordCreate_dateString+'</span></td><td class="has-text-centered"><span data-tooltip="Updated by '+d.recordUpdate_userName+'">'+d.recordUpdate_dateString+"</span></td>",e&&(o.insertAdjacentHTML("beforeend",'<td class="has-text-right"><button class="button is-small is-danger" data-tooltip="Delete Organization" data-organization-id="'+d.organizationID+'" data-organization-name="'+c+'" type="button"><span class="icon"><i class="fas fa-trash" aria-hidden="true"></i></span> <span>Delete</span></button></td>'),o.getElementsByTagName("button")[0].addEventListener("click",n)),i.appendChild(o)}s.appendChild(i),cityssm.clearElement(a),a.appendChild(s)}else a.innerHTML='<div class="message is-info"><p class="message-body">There are no inactive organizations to report.</p></div>'})}t.addEventListener("change",s),s()}();