(function(){function l(a){var b=a.currentTarget;a=llm.escapeHTML(b.getAttribute("data-organization-name"));llm.confirmModal("Delete Organization?","Are you sure you want delete "+a+"?","Yes, Delete","danger",function(){var a=b.getAttribute("data-organization-id");llm.postJSON("/organizations/doDelete",{organizationID:a},function(a){a.success?(llm.alertModal(a.message,"","OK","success"),b.closest("tr").remove()):llm.alertModal(a.message,"","OK","danger")})})}function c(){g.innerHTML='<p class="has-text-centered has-text-grey-lighter"><i class="fas fa-3x fa-circle-notch fa-spin" aria-hidden="true"></i><br /><em>Loading organizations...</em></p>';
llm.postJSON("/organizations/doGetInactive",{inactiveYears:d.value},function(a){if(0===a.length)g.innerHTML='<div class="message is-info"><p class="message-body">There are no inactive organizations to report.</p></div>';else{var b=document.createElement("table");b.className="table is-fullwidth";b.innerHTML='<thead><tr><th>Organization</th><th class="has-text-centered">Last Licence End Date</th>'+(k?'<th><span class="sr-only">Delete</span></th>':"")+"</tr></thead>";for(var c=document.createElement("tbody"),
h=0;h<a.length;h+=1){var e=a[h],f=document.createElement("tr"),d=llm.escapeHTML(e.organizationName);f.insertAdjacentHTML("beforeend",'<td><a data-tooltip="View Organization (Opens in New Window)" href="/organizations/'+e.organizationID+'" target="_blank">'+d+"</a></td>");f.insertAdjacentHTML("beforeend",'<td class="has-text-centered">'+(e.licences_endDateMax?e.licences_endDateMaxString:'<span class="tag is-light is-danger">No Licences</span>')+"</td>");k&&(f.insertAdjacentHTML("beforeend",'<td class="has-text-right"><button class="button is-small is-danger" data-organization-id="'+
e.organizationID+'" data-organization-name="'+d+'" type="button"><span class="icon"><i class="fas fa-trash-alt"></i></span> <span>Delete</span></button></td>'),f.getElementsByTagName("button")[0].addEventListener("click",l));c.insertAdjacentElement("beforeend",f)}b.insertAdjacentElement("beforeend",c);llm.clearElement(g);g.insertAdjacentElement("beforeend",b)}})}var k="true"===document.getElementsByTagName("main")[0].getAttribute("data-can-update"),d=document.getElementById("filter--inactiveYears"),
g=document.getElementById("container--searchResults");d.addEventListener("change",c);c()})();
